import{i as e,j as t,g as n,f as r,c as o,b as i,a,d as u,_ as c,e as s,h as l,k as f,w as d}from"./vendor-@babel-IoAzJ7sT.js";import{R as v,r as m}from"./vendor-react-BVfqOVDk.js";import{F as h}from"./vendor-@ant-design-yfVcUtjJ.js";import{c as p}from"./vendor-classnames-C6ZHPJN9.js";import{k as g,f as y,c as b,d as E,l as w,u as x,r as N,m as C,a as S,p as k,q as M,v as R,x as F,y as A,g as q,z as P,A as D}from"./vendor-rc-util-C7GvDjgY.js";import{r as I}from"./vendor-react-dom-DqUgb2va.js";import{R as L}from"./vendor-rc-resize-observer-CNB7JSb9.js";import{C as O}from"./vendor-rc-motion-BgWqvPg4.js";var j=["b"],T=["v"],_=function(e){return Math.round(Number(e||0))},H=function(){e(c,h);var u=t(c);function c(e){return n(this,c),u.call(this,function(e){if(e instanceof h)return e;if(e&&"object"===a(e)&&"h"in e&&"b"in e){var t=e,n=t.b,r=o(t,j);return i(i({},r),{},{v:n})}return"string"==typeof e&&/hsb/.test(e)?e.replace(/hsb/,"hsv"):e}(e))}return r(c,[{key:"toHsbString",value:function(){var e=this.toHsb(),t=_(100*e.s),n=_(100*e.b),r=_(e.h),o=e.a,i="hsb(".concat(r,", ").concat(t,"%, ").concat(n,"%)"),a="hsba(".concat(r,", ").concat(t,"%, ").concat(n,"%, ").concat(o.toFixed(0===o?0:2),")");return 1===o?i:a}},{key:"toHsb",value:function(){var e=this.toHsv(),t=e.v,n=o(e,T);return i(i({},n),{},{b:t,a:this.a})}}]),c}(),z=function(e){return e instanceof H?e:new H(e)},B=z("#1677ff"),X=function(e){var t=e.offset,n=e.targetRef,r=e.containerRef,o=e.color,a=e.type,u=r.current.getBoundingClientRect(),c=u.width,s=u.height,l=n.current.getBoundingClientRect(),f=l.width/2,d=l.height/2,v=(t.x+f)/c,m=1-(t.y+d)/s,h=o.toHsb(),p=v,g=(t.x+f)/c*360;if(a)switch(a){case"hue":return z(i(i({},h),{},{h:g<=0?0:g}));case"alpha":return z(i(i({},h),{},{a:p<=0?0:p}))}return z({h:h.h,s:v<=0?0:v,b:m>=1?1:m,a:h.a})},V=function(e,t){var n=e.toHsb();switch(t){case"hue":return{x:n.h/360*100,y:50};case"alpha":return{x:100*e.a,y:50};default:return{x:100*n.s,y:100*(1-n.b)}}},Y=function(e){var t=e.color,n=e.prefixCls,r=e.className,o=e.style,i=e.onClick,a="".concat(n,"-color-block");return v.createElement("div",{className:p(a,r),style:o,onClick:i},v.createElement("div",{className:"".concat(a,"-inner"),style:{background:t}}))};function W(e){var t=e.targetRef,n=e.containerRef,r=e.direction,o=e.onDragChange,i=e.onDragChangeComplete,a=e.calculate,c=e.color,s=e.disabledDrag,l=m.useState({x:0,y:0}),f=u(l,2),d=f[0],v=f[1],h=m.useRef(null),p=m.useRef(null);m.useEffect((function(){v(a())}),[c]),m.useEffect((function(){return function(){document.removeEventListener("mousemove",h.current),document.removeEventListener("mouseup",p.current),document.removeEventListener("touchmove",h.current),document.removeEventListener("touchend",p.current),h.current=null,p.current=null}}),[]);var g=function(e){var i=function(e){var t="touches"in e?e.touches[0]:e,n=document.documentElement.scrollLeft||document.body.scrollLeft||window.pageXOffset,r=document.documentElement.scrollTop||document.body.scrollTop||window.pageYOffset;return{pageX:t.pageX-n,pageY:t.pageY-r}}(e),a=i.pageX,u=i.pageY,c=n.current.getBoundingClientRect(),s=c.x,l=c.y,f=c.width,v=c.height,m=t.current.getBoundingClientRect(),h=m.width,p=m.height,g=h/2,y=p/2,b=Math.max(0,Math.min(a-s,f))-g,E=Math.max(0,Math.min(u-l,v))-y,w={x:b,y:"x"===r?d.y:E};if(0===h&&0===p||h!==p)return!1;null==o||o(w)},y=function(e){e.preventDefault(),g(e)},b=function(e){e.preventDefault(),document.removeEventListener("mousemove",h.current),document.removeEventListener("mouseup",p.current),document.removeEventListener("touchmove",h.current),document.removeEventListener("touchend",p.current),h.current=null,p.current=null,null==i||i()};return[d,function(e){document.removeEventListener("mousemove",h.current),document.removeEventListener("mouseup",p.current),s||(g(e),document.addEventListener("mousemove",y),document.addEventListener("mouseup",b),document.addEventListener("touchmove",y),document.addEventListener("touchend",b),h.current=y,p.current=b)}]}var $=function(e){var t=e.size,n=void 0===t?"default":t,r=e.color,o=e.prefixCls;return v.createElement("div",{className:p("".concat(o,"-handler"),c({},"".concat(o,"-handler-sm"),"small"===n)),style:{backgroundColor:r}})},G=function(e){var t=e.children,n=e.style,r=e.prefixCls;return v.createElement("div",{className:"".concat(r,"-palette"),style:i({position:"relative"},n)},t)},J=m.forwardRef((function(e,t){var n=e.children,r=e.x,o=e.y;return v.createElement("div",{ref:t,style:{position:"absolute",left:"".concat(r,"%"),top:"".concat(o,"%"),zIndex:1,transform:"translate(-50%, -50%)"}},n)})),Z=function(e){var t=e.color,n=e.onChange,r=e.prefixCls,o=e.onChangeComplete,i=e.disabled,a=m.useRef(),c=m.useRef(),s=m.useRef(t),l=g((function(e){var r=X({offset:e,targetRef:c,containerRef:a,color:t});s.current=r,n(r)})),f=W({color:t,containerRef:a,targetRef:c,calculate:function(){return V(t)},onDragChange:l,onDragChangeComplete:function(){return null==o?void 0:o(s.current)},disabledDrag:i}),d=u(f,2),h=d[0],p=d[1];return v.createElement("div",{ref:a,className:"".concat(r,"-select"),onMouseDown:p,onTouchStart:p},v.createElement(G,{prefixCls:r},v.createElement(J,{x:h.x,y:h.y,ref:c},v.createElement($,{color:t.toRgbString(),prefixCls:r})),v.createElement("div",{className:"".concat(r,"-saturation"),style:{backgroundColor:"hsl(".concat(t.toHsb().h,",100%, 50%)"),backgroundImage:"linear-gradient(0deg, #000, transparent),linear-gradient(90deg, #fff, hsla(0, 0%, 100%, 0))"}})))},U=function(e){var t=e.colors,n=e.children,r=e.direction,o=void 0===r?"to right":r,i=e.type,a=e.prefixCls,u=m.useMemo((function(){return t.map((function(e,n){var r=z(e);return"alpha"===i&&n===t.length-1&&(r=new H(r.setA(1))),r.toRgbString()})).join(",")}),[t,i]);return v.createElement("div",{className:"".concat(a,"-gradient"),style:{position:"absolute",inset:0,background:"linear-gradient(".concat(o,", ").concat(u,")")}},n)},K=function(e){var t=e.prefixCls,n=e.colors,r=e.disabled,o=e.onChange,i=e.onChangeComplete,a=e.color,c=e.type,s=m.useRef(),l=m.useRef(),f=m.useRef(a),d=function(e){return"hue"===c?e.getHue():100*e.a},h=g((function(e){var t=X({offset:e,targetRef:l,containerRef:s,color:a,type:c});f.current=t,o(d(t))})),y=W({color:a,targetRef:l,containerRef:s,calculate:function(){return V(a,c)},onDragChange:h,onDragChangeComplete:function(){i(d(f.current))},direction:"x",disabledDrag:r}),b=u(y,2),E=b[0],w=b[1],x=v.useMemo((function(){if("hue"===c){var e=a.toHsb();return e.s=1,e.b=1,e.a=1,new H(e)}return a}),[a,c]),N=v.useMemo((function(){return n.map((function(e){return"".concat(e.color," ").concat(e.percent,"%")}))}),[n]);return v.createElement("div",{ref:s,className:p("".concat(t,"-slider"),"".concat(t,"-slider-").concat(c)),onMouseDown:w,onTouchStart:w},v.createElement(G,{prefixCls:t},v.createElement(J,{x:E.x,y:E.y,ref:l},v.createElement($,{size:"small",color:x.toHexString(),prefixCls:t})),v.createElement(U,{colors:N,type:c,prefixCls:t})))};var Q=[{color:"rgb(255, 0, 0)",percent:0},{color:"rgb(255, 255, 0)",percent:17},{color:"rgb(0, 255, 0)",percent:33},{color:"rgb(0, 255, 255)",percent:50},{color:"rgb(0, 0, 255)",percent:67},{color:"rgb(255, 0, 255)",percent:83},{color:"rgb(255, 0, 0)",percent:100}],ee=m.forwardRef((function(e,t){var n=e.value,r=e.defaultValue,o=e.prefixCls,i=void 0===o?"rc-color-picker":o,a=e.onChange,l=e.onChangeComplete,f=e.className,d=e.style,h=e.panelRender,g=e.disabledAlpha,b=void 0!==g&&g,E=e.disabled,w=void 0!==E&&E,x=function(e){return m.useMemo((function(){return[(e||{}).slider||K]}),[e])}(e.components),N=u(x,1)[0],C=function(e,t){var n=y(e,{value:t}),r=u(n,2),o=r[0],i=r[1];return[m.useMemo((function(){return z(o)}),[o]),i]}(r||B,n),S=u(C,2),k=S[0],M=S[1],R=m.useMemo((function(){return k.setA(1).toRgbString()}),[k]),F=function(e,t){n||M(e),null==a||a(e,t)},A=function(e){return new H(k.setHue(e))},q=function(e){return new H(k.setA(e/100))},P=p("".concat(i,"-panel"),f,c({},"".concat(i,"-panel-disabled"),w)),D={prefixCls:i,disabled:w,color:k},I=v.createElement(v.Fragment,null,v.createElement(Z,s({onChange:F},D,{onChangeComplete:l})),v.createElement("div",{className:"".concat(i,"-slider-container")},v.createElement("div",{className:p("".concat(i,"-slider-group"),c({},"".concat(i,"-slider-group-disabled-alpha"),b))},v.createElement(N,s({},D,{type:"hue",colors:Q,min:0,max:359,value:k.getHue(),onChange:function(e){F(A(e),{type:"hue",value:e})},onChangeComplete:function(e){l&&l(A(e))}})),!b&&v.createElement(N,s({},D,{type:"alpha",colors:[{percent:0,color:"rgba(255, 0, 4, 0)"},{percent:100,color:R}],min:0,max:100,value:100*k.a,onChange:function(e){F(q(e),{type:"alpha",value:e})},onChangeComplete:function(e){l&&l(q(e))}}))),v.createElement(Y,{color:k.toRgbString(),prefixCls:i})));return v.createElement("div",{className:P,style:d,ref:t},"function"==typeof h?h(I):I)})),te=m.createContext(null),ne=[];var re="rc-util-locker-".concat(Date.now()),oe=0;function ie(e){var t=!!e,n=m.useState((function(){return oe+=1,"".concat(re,"_").concat(oe)})),r=u(n,1)[0];E((function(){if(t){var e=w(document.body).width,n=document.body.scrollHeight>(window.innerHeight||document.documentElement.clientHeight)&&window.innerWidth>document.body.offsetWidth;x("\nhtml body {\n  overflow-y: hidden;\n  ".concat(n?"width: calc(100% - ".concat(e,"px);"):"","\n}"),r)}else N(r);return function(){N(r)}}),[t,r])}var ae=function(e){return!1!==e&&(b()&&e?"string"==typeof e?document.querySelector(e):"function"==typeof e?e():e:null)},ue=m.forwardRef((function(e,t){var n=e.open,r=e.autoLock,o=e.getContainer;e.debug;var i=e.autoDestroy,a=void 0===i||i,c=e.children,s=m.useState(n),f=u(s,2),d=f[0],v=f[1],h=d||n;m.useEffect((function(){(a||n)&&v(n)}),[n,a]);var p=m.useState((function(){return ae(o)})),g=u(p,2),y=g[0],w=g[1];m.useEffect((function(){var e=ae(o);w(null!=e?e:null)}));var x=function(e){var t=m.useState((function(){return b()?document.createElement("div"):null})),n=u(t,1)[0],r=m.useRef(!1),o=m.useContext(te),i=m.useState(ne),a=u(i,2),c=a[0],s=a[1],f=o||(r.current?void 0:function(e){s((function(t){return[e].concat(l(t))}))});function d(){n.parentElement||document.body.appendChild(n),r.current=!0}function v(){var e;null===(e=n.parentElement)||void 0===e||e.removeChild(n),r.current=!1}return E((function(){return e?o?o(d):d():v(),v}),[e]),E((function(){c.length&&(c.forEach((function(e){return e()})),s(ne))}),[c]),[n,f]}(h&&!y),N=u(x,2),k=N[0],M=N[1],R=null!=y?y:k;ie(r&&n&&b()&&(R===k||R===document.body));var F=null;c&&C(c)&&t&&(F=c.ref);var A=S(F,t);if(!h||!b()||void 0===y)return null;var q=!1===R||!1,P=c;return t&&(P=m.cloneElement(c,{ref:A})),m.createElement(te.Provider,{value:M},q?P:I.createPortal(P,R))}));function ce(){return{default:"Validation error on field %s",required:"%s is required",enum:"%s must be one of %s",whitespace:"%s cannot be empty",date:{format:"%s date %s is invalid for format %s",parse:"%s date could not be parsed, %s is invalid ",invalid:"%s date %s is invalid"},types:{string:"%s is not a %s",method:"%s is not a %s (function)",array:"%s is not an %s",object:"%s is not an %s",number:"%s is not a %s",date:"%s is not a %s",boolean:"%s is not a %s",integer:"%s is not an %s",float:"%s is not a %s",regexp:"%s is not a valid %s",email:"%s is not a valid %s",url:"%s is not a valid %s",hex:"%s is not a valid %s"},string:{len:"%s must be exactly %s characters",min:"%s must be at least %s characters",max:"%s cannot be longer than %s characters",range:"%s must be between %s and %s characters"},number:{len:"%s must equal %s",min:"%s cannot be less than %s",max:"%s cannot be greater than %s",range:"%s must be between %s and %s"},array:{len:"%s must be exactly %s in length",min:"%s cannot be less than %s in length",max:"%s cannot be greater than %s in length",range:"%s must be between %s and %s in length"},pattern:{mismatch:"%s value %s does not match pattern %s"},clone:function(){var e=JSON.parse(JSON.stringify(this));return e.clone=this.clone,e}}}var se=ce(),le=/%[sdj%]/g;function fe(e){if(!e||!e.length)return null;var t={};return e.forEach((function(e){var n=e.field;t[n]=t[n]||[],t[n].push(e)})),t}function de(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var o=0,i=n.length;return"function"==typeof e?e.apply(null,n):"string"==typeof e?e.replace(le,(function(e){if("%%"===e)return"%";if(o>=i)return e;switch(e){case"%s":return String(n[o++]);case"%d":return Number(n[o++]);case"%j":try{return JSON.stringify(n[o++])}catch(t){return"[Circular]"}break;default:return e}})):e}function ve(e,t){return null==e||(!("array"!==t||!Array.isArray(e)||e.length)||!(!function(e){return"string"===e||"url"===e||"hex"===e||"email"===e||"date"===e||"pattern"===e}(t)||"string"!=typeof e||e))}function me(e,t,n){var r=0,o=e.length;!function i(a){if(a&&a.length)n(a);else{var u=r;r+=1,u<o?t(e[u],i):n([])}}([])}var he=function(o){e(a,o);var i=t(a);function a(e,t){var r;return n(this,a),r=i.call(this,"Async Validation Error"),c(f(r),"errors",void 0),c(f(r),"fields",void 0),r.errors=e,r.fields=t,r}return r(a)}(d(Error));function pe(e,t,n,r,o){if(t.first){var i=new Promise((function(t,i){var a=function(e){var t=[];return Object.keys(e).forEach((function(n){t.push.apply(t,l(e[n]||[]))})),t}(e);me(a,n,(function(e){return r(e),e.length?i(new he(e,fe(e))):t(o)}))}));return i.catch((function(e){return e})),i}var a=!0===t.firstFields?Object.keys(e):t.firstFields||[],u=Object.keys(e),c=u.length,s=0,f=[],d=new Promise((function(t,i){var d=function(e){if(f.push.apply(f,e),++s===c)return r(f),f.length?i(new he(f,fe(f))):t(o)};u.length||(r(f),t(o)),u.forEach((function(t){var r=e[t];-1!==a.indexOf(t)?me(r,n,d):function(e,t,n){var r=[],o=0,i=e.length;function a(e){r.push.apply(r,l(e||[])),++o===i&&n(r)}e.forEach((function(e){t(e,a)}))}(r,n,d)}))}));return d.catch((function(e){return e})),d}function ge(e,t){return function(n){var r,o;return r=e.fullFields?function(e,t){for(var n=e,r=0;r<t.length;r++){if(null==n)return n;n=n[t[r]]}return n}(t,e.fullFields):t[n.field||e.fullField],(o=n)&&void 0!==o.message?(n.field=n.field||e.fullField,n.fieldValue=r,n):{message:"function"==typeof n?n():n,fieldValue:r,field:n.field||e.fullField}}}function ye(e,t){if(t)for(var n in t)if(t.hasOwnProperty(n)){var r=t[n];"object"===a(r)&&"object"===a(e[n])?e[n]=i(i({},e[n]),r):e[n]=r}return e}var be,Ee="enum",we=function(e,t,n,r,o,i){!e.required||n.hasOwnProperty(e.field)&&!ve(t,i||e.type)||r.push(de(o.messages.required,e.fullField))};var xe=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+\.)+[a-zA-Z\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]{2,}))$/,Ne=/^#?([a-f0-9]{6}|[a-f0-9]{3})$/i,Ce={integer:function(e){return Ce.number(e)&&parseInt(e,10)===e},float:function(e){return Ce.number(e)&&!Ce.integer(e)},array:function(e){return Array.isArray(e)},regexp:function(e){if(e instanceof RegExp)return!0;try{return!!new RegExp(e)}catch(t){return!1}},date:function(e){return"function"==typeof e.getTime&&"function"==typeof e.getMonth&&"function"==typeof e.getYear&&!isNaN(e.getTime())},number:function(e){return!isNaN(e)&&"number"==typeof e},object:function(e){return"object"===a(e)&&!Ce.array(e)},method:function(e){return"function"==typeof e},email:function(e){return"string"==typeof e&&e.length<=320&&!!e.match(xe)},url:function(e){return"string"==typeof e&&e.length<=2048&&!!e.match(function(){if(be)return be;var e="[a-fA-F\\d:]",t=function(t){return t&&t.includeBoundaries?"(?:(?<=\\s|^)(?=".concat(e,")|(?<=").concat(e,")(?=\\s|$))"):""},n="(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)){3}",r="[a-fA-F\\d]{1,4}",o=["(?:".concat(r,":){7}(?:").concat(r,"|:)"),"(?:".concat(r,":){6}(?:").concat(n,"|:").concat(r,"|:)"),"(?:".concat(r,":){5}(?::").concat(n,"|(?::").concat(r,"){1,2}|:)"),"(?:".concat(r,":){4}(?:(?::").concat(r,"){0,1}:").concat(n,"|(?::").concat(r,"){1,3}|:)"),"(?:".concat(r,":){3}(?:(?::").concat(r,"){0,2}:").concat(n,"|(?::").concat(r,"){1,4}|:)"),"(?:".concat(r,":){2}(?:(?::").concat(r,"){0,3}:").concat(n,"|(?::").concat(r,"){1,5}|:)"),"(?:".concat(r,":){1}(?:(?::").concat(r,"){0,4}:").concat(n,"|(?::").concat(r,"){1,6}|:)"),"(?::(?:(?::".concat(r,"){0,5}:").concat(n,"|(?::").concat(r,"){1,7}|:))")],i="(?:".concat(o.join("|"),")").concat("(?:%[0-9a-zA-Z]{1,})?"),a=new RegExp("(?:^".concat(n,"$)|(?:^").concat(i,"$)")),u=new RegExp("^".concat(n,"$")),c=new RegExp("^".concat(i,"$")),s=function(e){return e&&e.exact?a:new RegExp("(?:".concat(t(e)).concat(n).concat(t(e),")|(?:").concat(t(e)).concat(i).concat(t(e),")"),"g")};s.v4=function(e){return e&&e.exact?u:new RegExp("".concat(t(e)).concat(n).concat(t(e)),"g")},s.v6=function(e){return e&&e.exact?c:new RegExp("".concat(t(e)).concat(i).concat(t(e)),"g")};var l=s.v4().source,f=s.v6().source,d="(?:".concat("(?:(?:[a-z]+:)?//)","|www\\.)").concat("(?:\\S+(?::\\S*)?@)?","(?:localhost|").concat(l,"|").concat(f,"|").concat("(?:(?:[a-z\\u00a1-\\uffff0-9][-_]*)*[a-z\\u00a1-\\uffff0-9]+)").concat("(?:\\.(?:[a-z\\u00a1-\\uffff0-9]-*)*[a-z\\u00a1-\\uffff0-9]+)*").concat("(?:\\.(?:[a-z\\u00a1-\\uffff]{2,}))",")").concat("(?::\\d{2,5})?").concat('(?:[/?#][^\\s"]*)?');return be=new RegExp("(?:^".concat(d,"$)"),"i")}())},hex:function(e){return"string"==typeof e&&!!e.match(Ne)}};const Se={required:we,whitespace:function(e,t,n,r,o){(/^\s+$/.test(t)||""===t)&&r.push(de(o.messages.whitespace,e.fullField))},type:function(e,t,n,r,o){if(e.required&&void 0===t)we(e,t,n,r,o);else{var i=e.type;["integer","float","array","regexp","object","method","email","number","date","url","hex"].indexOf(i)>-1?Ce[i](t)||r.push(de(o.messages.types[i],e.fullField,e.type)):i&&a(t)!==e.type&&r.push(de(o.messages.types[i],e.fullField,e.type))}},range:function(e,t,n,r,o){var i="number"==typeof e.len,a="number"==typeof e.min,u="number"==typeof e.max,c=t,s=null,l="number"==typeof t,f="string"==typeof t,d=Array.isArray(t);if(l?s="number":f?s="string":d&&(s="array"),!s)return!1;d&&(c=t.length),f&&(c=t.replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,"_").length),i?c!==e.len&&r.push(de(o.messages[s].len,e.fullField,e.len)):a&&!u&&c<e.min?r.push(de(o.messages[s].min,e.fullField,e.min)):u&&!a&&c>e.max?r.push(de(o.messages[s].max,e.fullField,e.max)):a&&u&&(c<e.min||c>e.max)&&r.push(de(o.messages[s].range,e.fullField,e.min,e.max))},enum:function(e,t,n,r,o){e[Ee]=Array.isArray(e[Ee])?e[Ee]:[],-1===e[Ee].indexOf(t)&&r.push(de(o.messages[Ee],e.fullField,e[Ee].join(", ")))},pattern:function(e,t,n,r,o){if(e.pattern)if(e.pattern instanceof RegExp)e.pattern.lastIndex=0,e.pattern.test(t)||r.push(de(o.messages.pattern.mismatch,e.fullField,t,e.pattern));else if("string"==typeof e.pattern){new RegExp(e.pattern).test(t)||r.push(de(o.messages.pattern.mismatch,e.fullField,t,e.pattern))}}};var ke=function(e,t,n,r,o){var i=e.type,a=[];if(e.required||!e.required&&r.hasOwnProperty(e.field)){if(ve(t,i)&&!e.required)return n();Se.required(e,t,r,a,o,i),ve(t,i)||Se.type(e,t,r,a,o)}n(a)};const Me={string:function(e,t,n,r,o){var i=[];if(e.required||!e.required&&r.hasOwnProperty(e.field)){if(ve(t,"string")&&!e.required)return n();Se.required(e,t,r,i,o,"string"),ve(t,"string")||(Se.type(e,t,r,i,o),Se.range(e,t,r,i,o),Se.pattern(e,t,r,i,o),!0===e.whitespace&&Se.whitespace(e,t,r,i,o))}n(i)},method:function(e,t,n,r,o){var i=[];if(e.required||!e.required&&r.hasOwnProperty(e.field)){if(ve(t)&&!e.required)return n();Se.required(e,t,r,i,o),void 0!==t&&Se.type(e,t,r,i,o)}n(i)},number:function(e,t,n,r,o){var i=[];if(e.required||!e.required&&r.hasOwnProperty(e.field)){if(""===t&&(t=void 0),ve(t)&&!e.required)return n();Se.required(e,t,r,i,o),void 0!==t&&(Se.type(e,t,r,i,o),Se.range(e,t,r,i,o))}n(i)},boolean:function(e,t,n,r,o){var i=[];if(e.required||!e.required&&r.hasOwnProperty(e.field)){if(ve(t)&&!e.required)return n();Se.required(e,t,r,i,o),void 0!==t&&Se.type(e,t,r,i,o)}n(i)},regexp:function(e,t,n,r,o){var i=[];if(e.required||!e.required&&r.hasOwnProperty(e.field)){if(ve(t)&&!e.required)return n();Se.required(e,t,r,i,o),ve(t)||Se.type(e,t,r,i,o)}n(i)},integer:function(e,t,n,r,o){var i=[];if(e.required||!e.required&&r.hasOwnProperty(e.field)){if(ve(t)&&!e.required)return n();Se.required(e,t,r,i,o),void 0!==t&&(Se.type(e,t,r,i,o),Se.range(e,t,r,i,o))}n(i)},float:function(e,t,n,r,o){var i=[];if(e.required||!e.required&&r.hasOwnProperty(e.field)){if(ve(t)&&!e.required)return n();Se.required(e,t,r,i,o),void 0!==t&&(Se.type(e,t,r,i,o),Se.range(e,t,r,i,o))}n(i)},array:function(e,t,n,r,o){var i=[];if(e.required||!e.required&&r.hasOwnProperty(e.field)){if(null==t&&!e.required)return n();Se.required(e,t,r,i,o,"array"),null!=t&&(Se.type(e,t,r,i,o),Se.range(e,t,r,i,o))}n(i)},object:function(e,t,n,r,o){var i=[];if(e.required||!e.required&&r.hasOwnProperty(e.field)){if(ve(t)&&!e.required)return n();Se.required(e,t,r,i,o),void 0!==t&&Se.type(e,t,r,i,o)}n(i)},enum:function(e,t,n,r,o){var i=[];if(e.required||!e.required&&r.hasOwnProperty(e.field)){if(ve(t)&&!e.required)return n();Se.required(e,t,r,i,o),void 0!==t&&Se.enum(e,t,r,i,o)}n(i)},pattern:function(e,t,n,r,o){var i=[];if(e.required||!e.required&&r.hasOwnProperty(e.field)){if(ve(t,"string")&&!e.required)return n();Se.required(e,t,r,i,o),ve(t,"string")||Se.pattern(e,t,r,i,o)}n(i)},date:function(e,t,n,r,o){var i=[];if(e.required||!e.required&&r.hasOwnProperty(e.field)){if(ve(t,"date")&&!e.required)return n();var a;if(Se.required(e,t,r,i,o),!ve(t,"date"))a=t instanceof Date?t:new Date(t),Se.type(e,a,r,i,o),a&&Se.range(e,a.getTime(),r,i,o)}n(i)},url:ke,hex:ke,email:ke,required:function(e,t,n,r,o){var i=[],u=Array.isArray(t)?"array":a(t);Se.required(e,t,r,i,o,u),n(i)},any:function(e,t,n,r,o){var i=[];if(e.required||!e.required&&r.hasOwnProperty(e.field)){if(ve(t)&&!e.required)return n();Se.required(e,t,r,i,o)}n(i)}};var Re=function(){function e(t){n(this,e),c(this,"rules",null),c(this,"_messages",se),this.define(t)}return r(e,[{key:"define",value:function(e){var t=this;if(!e)throw new Error("Cannot configure a schema with no rules");if("object"!==a(e)||Array.isArray(e))throw new Error("Rules must be an object");this.rules={},Object.keys(e).forEach((function(n){var r=e[n];t.rules[n]=Array.isArray(r)?r:[r]}))}},{key:"messages",value:function(e){return e&&(this._messages=ye(ce(),e)),this._messages}},{key:"validate",value:function(t){var n=this,r=t,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},u=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){};if("function"==typeof o&&(u=o,o={}),!this.rules||0===Object.keys(this.rules).length)return u&&u(null,r),Promise.resolve(r);if(o.messages){var c=this.messages();c===se&&(c=ce()),ye(c,o.messages),o.messages=c}else o.messages=this.messages();var s={};(o.keys||Object.keys(this.rules)).forEach((function(e){var o=n.rules[e],u=r[e];o.forEach((function(o){var c=o;"function"==typeof c.transform&&(r===t&&(r=i({},r)),null!=(u=r[e]=c.transform(u))&&(c.type=c.type||(Array.isArray(u)?"array":a(u)))),(c="function"==typeof c?{validator:c}:i({},c)).validator=n.getValidationMethod(c),c.validator&&(c.field=e,c.fullField=c.fullField||e,c.type=n.getType(c),s[e]=s[e]||[],s[e].push({rule:c,value:u,source:r,field:e}))}))}));var f={};return pe(s,o,(function(t,n){var u,c=t.rule,s=!("object"!==c.type&&"array"!==c.type||"object"!==a(c.fields)&&"object"!==a(c.defaultField));function d(e,t){return i(i({},t),{},{fullField:"".concat(c.fullField,".").concat(e),fullFields:c.fullFields?[].concat(l(c.fullFields),[e]):[e]})}function v(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],u=Array.isArray(a)?a:[a];!o.suppressWarning&&u.length&&e.warning("async-validator:",u),u.length&&void 0!==c.message&&(u=[].concat(c.message));var v=u.map(ge(c,r));if(o.first&&v.length)return f[c.field]=1,n(v);if(s){if(c.required&&!t.value)return void 0!==c.message?v=[].concat(c.message).map(ge(c,r)):o.error&&(v=[o.error(c,de(o.messages.required,c.field))]),n(v);var m={};c.defaultField&&Object.keys(t.value).map((function(e){m[e]=c.defaultField})),m=i(i({},m),t.rule.fields);var h={};Object.keys(m).forEach((function(e){var t=m[e],n=Array.isArray(t)?t:[t];h[e]=n.map(d.bind(null,e))}));var p=new e(h);p.messages(o.messages),t.rule.options&&(t.rule.options.messages=o.messages,t.rule.options.error=o.error),p.validate(t.value,t.rule.options||o,(function(e){var t=[];v&&v.length&&t.push.apply(t,l(v)),e&&e.length&&t.push.apply(t,l(e)),n(t.length?t:null)}))}else n(v)}if(s=s&&(c.required||!c.required&&t.value),c.field=t.field,c.asyncValidator)u=c.asyncValidator(c,t.value,v,t.source,o);else if(c.validator){try{u=c.validator(c,t.value,v,t.source,o)}catch(p){var m,h;null===(m=(h=console).error)||void 0===m||m.call(h,p),o.suppressValidatorError||setTimeout((function(){throw p}),0),v(p.message)}!0===u?v():!1===u?v("function"==typeof c.message?c.message(c.fullField||c.field):c.message||"".concat(c.fullField||c.field," fails")):u instanceof Array?v(u):u instanceof Error&&v(u.message)}u&&u.then&&u.then((function(){return v()}),(function(e){return v(e)}))}),(function(e){!function(e){for(var t,n,o=[],i={},a=0;a<e.length;a++)t=e[a],n=void 0,Array.isArray(t)?o=(n=o).concat.apply(n,l(t)):o.push(t);o.length?(i=fe(o),u(o,i)):u(null,r)}(e)}),r)}},{key:"getType",value:function(e){if(void 0===e.type&&e.pattern instanceof RegExp&&(e.type="pattern"),"function"!=typeof e.validator&&e.type&&!Me.hasOwnProperty(e.type))throw new Error(de("Unknown rule type %s",e.type));return e.type||"string"}},{key:"getValidationMethod",value:function(e){if("function"==typeof e.validator)return e.validator;var t=Object.keys(e),n=t.indexOf("message");return-1!==n&&t.splice(n,1),1===t.length&&"required"===t[0]?Me.required:Me[this.getType(e)]||void 0}}]),e}();function Fe(e){var t=e.prefixCls,n=e.align,r=e.arrow,o=e.arrowPos,i=r||{},a=i.className,u=i.content,c=o.x,s=void 0===c?0:c,l=o.y,f=void 0===l?0:l,d=m.useRef();if(!n||!n.points)return null;var v={position:"absolute"};if(!1!==n.autoArrow){var h=n.points[0],g=n.points[1],y=h[0],b=h[1],E=g[0],w=g[1];y!==E&&["t","b"].includes(y)?"t"===y?v.top=0:v.bottom=0:v.top=f,b!==w&&["l","r"].includes(b)?"l"===b?v.left=0:v.right=0:v.left=s}return m.createElement("div",{ref:d,className:p("".concat(t,"-arrow"),a),style:v},u)}function Ae(e){var t=e.prefixCls,n=e.open,r=e.zIndex,o=e.mask,i=e.motion;return o?m.createElement(O,s({},i,{motionAppear:!0,visible:n,removeOnLeave:!0}),(function(e){var n=e.className;return m.createElement("div",{style:{zIndex:r},className:p("".concat(t,"-mask"),n)})})):null}c(Re,"register",(function(e,t){if("function"!=typeof t)throw new Error("Cannot register a validator by type, validator is not a function");Me[e]=t})),c(Re,"warning",(function(){})),c(Re,"messages",se),c(Re,"validators",Me);var qe=m.memo((function(e){return e.children}),(function(e,t){return t.cache})),Pe=m.forwardRef((function(e,t){var n=e.popup,r=e.className,o=e.prefixCls,a=e.style,c=e.target,l=e.onVisibleChanged,f=e.open,d=e.keepDom,v=e.fresh,h=e.onClick,g=e.mask,y=e.arrow,b=e.arrowPos,w=e.align,x=e.motion,N=e.maskMotion,C=e.forceRender,S=e.getPopupContainer,M=e.autoDestroy,R=e.portal,F=e.zIndex,A=e.onMouseEnter,q=e.onMouseLeave,P=e.onPointerEnter,D=e.onPointerDownCapture,I=e.ready,j=e.offsetX,T=e.offsetY,_=e.offsetR,H=e.offsetB,z=e.onAlign,B=e.onPrepare,X=e.stretch,V=e.targetWidth,Y=e.targetHeight,W="function"==typeof n?n():n,$=f||d,G=(null==S?void 0:S.length)>0,J=m.useState(!S||!G),Z=u(J,2),U=Z[0],K=Z[1];if(E((function(){!U&&G&&c&&K(!0)}),[U,G,c]),!U)return null;var Q="auto",ee={left:"-1000vw",top:"-1000vh",right:Q,bottom:Q};if(I||!f){var te,ne=w.points,re=w.dynamicInset||(null===(te=w._experimental)||void 0===te?void 0:te.dynamicInset),oe=re&&"r"===ne[0][1],ie=re&&"b"===ne[0][0];oe?(ee.right=_,ee.left=Q):(ee.left=j,ee.right=Q),ie?(ee.bottom=H,ee.top=Q):(ee.top=T,ee.bottom=Q)}var ae={};return X&&(X.includes("height")&&Y?ae.height=Y:X.includes("minHeight")&&Y&&(ae.minHeight=Y),X.includes("width")&&V?ae.width=V:X.includes("minWidth")&&V&&(ae.minWidth=V)),f||(ae.pointerEvents="none"),m.createElement(R,{open:C||$,getContainer:S&&function(){return S(c)},autoDestroy:M},m.createElement(Ae,{prefixCls:o,open:f,zIndex:F,mask:g,motion:N}),m.createElement(L,{onResize:z,disabled:!f},(function(e){return m.createElement(O,s({motionAppear:!0,motionEnter:!0,motionLeave:!0,removeOnLeave:!1,forceRender:C,leavedClassName:"".concat(o,"-hidden")},x,{onAppearPrepare:B,onEnterPrepare:B,visible:f,onVisibleChanged:function(e){var t;null==x||null===(t=x.onVisibleChanged)||void 0===t||t.call(x,e),l(e)}}),(function(n,u){var c=n.className,s=n.style,l=p(o,c,r);return m.createElement("div",{ref:k(e,t,u),className:l,style:i(i(i(i({"--arrow-x":"".concat(b.x||0,"px"),"--arrow-y":"".concat(b.y||0,"px")},ee),ae),s),{},{boxSizing:"border-box",zIndex:F},a),onMouseEnter:A,onMouseLeave:q,onPointerEnter:P,onClick:h,onPointerDownCapture:D},y&&m.createElement(Fe,{prefixCls:o,arrow:y,arrowPos:b,align:w}),m.createElement(qe,{cache:!f&&!v},W))}))})))})),De=m.forwardRef((function(e,t){var n=e.children,r=e.getTriggerDOMNode,o=C(n),i=m.useCallback((function(e){M(t,r?r(e):e)}),[r]),a=S(i,R(n));return o?m.cloneElement(n,{ref:a}):n})),Ie=m.createContext(null);function Le(e){return e?Array.isArray(e)?e:[e]:[]}function Oe(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return(arguments.length>2?arguments[2]:void 0)?e[0]===t[0]:e[0]===t[0]&&e[1]===t[1]}function je(e,t,n,r){return t||(n?{motionName:"".concat(e,"-").concat(n)}:r?{motionName:r}:null)}function Te(e){return e.ownerDocument.defaultView}function _e(e){for(var t=[],n=null==e?void 0:e.parentElement,r=["hidden","scroll","clip","auto"];n;){var o=Te(n).getComputedStyle(n);[o.overflowX,o.overflowY,o.overflow].some((function(e){return r.includes(e)}))&&t.push(n),n=n.parentElement}return t}function He(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return Number.isNaN(e)?t:e}function ze(e){return He(parseFloat(e),0)}function Be(e,t){var n=i({},e);return(t||[]).forEach((function(e){if(!(e instanceof HTMLBodyElement||e instanceof HTMLHtmlElement)){var t=Te(e).getComputedStyle(e),r=t.overflow,o=t.overflowClipMargin,i=t.borderTopWidth,a=t.borderBottomWidth,u=t.borderLeftWidth,c=t.borderRightWidth,s=e.getBoundingClientRect(),l=e.offsetHeight,f=e.clientHeight,d=e.offsetWidth,v=e.clientWidth,m=ze(i),h=ze(a),p=ze(u),g=ze(c),y=He(Math.round(s.width/d*1e3)/1e3),b=He(Math.round(s.height/l*1e3)/1e3),E=(d-v-p-g)*y,w=(l-f-m-h)*b,x=m*b,N=h*b,C=p*y,S=g*y,k=0,M=0;if("clip"===r){var R=ze(o);k=R*y,M=R*b}var F=s.x+C-k,A=s.y+x-M,q=F+s.width+2*k-C-S-E,P=A+s.height+2*M-x-N-w;n.left=Math.max(n.left,F),n.top=Math.max(n.top,A),n.right=Math.min(n.right,q),n.bottom=Math.min(n.bottom,P)}})),n}function Xe(e){var t="".concat(arguments.length>1&&void 0!==arguments[1]?arguments[1]:0),n=t.match(/^(.*)\%$/);return n?e*(parseFloat(n[1])/100):parseFloat(t)}function Ve(e,t){var n=u(t||[],2),r=n[0],o=n[1];return[Xe(e.width,r),Xe(e.height,o)]}function Ye(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return[e[0],e[1]]}function We(e,t){var n,r=t[0],o=t[1];return n="t"===r?e.y:"b"===r?e.y+e.height:e.y+e.height/2,{x:"l"===o?e.x:"r"===o?e.x+e.width:e.x+e.width/2,y:n}}function $e(e,t){var n={t:"b",b:"t",l:"r",r:"l"};return e.map((function(e,r){return r===t?n[e]||"c":e})).join("")}var Ge=["prefixCls","children","action","showAction","hideAction","popupVisible","defaultPopupVisible","onPopupVisibleChange","afterPopupVisibleChange","mouseEnterDelay","mouseLeaveDelay","focusDelay","blurDelay","mask","maskClosable","getPopupContainer","forceRender","autoDestroy","destroyPopupOnHide","popup","popupClassName","popupStyle","popupPlacement","builtinPlacements","popupAlign","zIndex","stretch","getPopupClassNameFromAlign","fresh","alignPoint","onPopupClick","onPopupAlign","arrow","popupMotion","maskMotion","popupTransitionName","popupAnimation","maskTransitionName","maskAnimation","className","getTriggerDOMNode"];const Je=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ue;return m.forwardRef((function(t,n){var r=t.prefixCls,a=void 0===r?"rc-trigger-popup":r,c=t.children,s=t.action,f=void 0===s?"hover":s,d=t.showAction,v=t.hideAction,h=t.popupVisible,y=t.defaultPopupVisible,b=t.onPopupVisibleChange,w=t.afterPopupVisibleChange,x=t.mouseEnterDelay,N=t.mouseLeaveDelay,C=void 0===N?.1:N,S=t.focusDelay,k=t.blurDelay,M=t.mask,R=t.maskClosable,I=void 0===R||R,O=t.getPopupContainer,j=t.forceRender,T=t.autoDestroy,_=t.destroyPopupOnHide,H=t.popup,z=t.popupClassName,B=t.popupStyle,X=t.popupPlacement,V=t.builtinPlacements,Y=void 0===V?{}:V,W=t.popupAlign,$=t.zIndex,G=t.stretch,J=t.getPopupClassNameFromAlign,Z=t.fresh,U=t.alignPoint,K=t.onPopupClick,Q=t.onPopupAlign,ee=t.arrow,te=t.popupMotion,ne=t.maskMotion,re=t.popupTransitionName,oe=t.popupAnimation,ie=t.maskTransitionName,ae=t.maskAnimation,ue=t.className,ce=t.getTriggerDOMNode,se=o(t,Ge),le=T||_||!1,fe=m.useState(!1),de=u(fe,2),ve=de[0],me=de[1];E((function(){me(P())}),[]);var he=m.useRef({}),pe=m.useContext(Ie),ge=m.useMemo((function(){return{registerSubPopup:function(e,t){he.current[e]=t,null==pe||pe.registerSubPopup(e,t)}}}),[pe]),ye=D(),be=m.useState(null),Ee=u(be,2),we=Ee[0],xe=Ee[1],Ne=m.useRef(null),Ce=g((function(e){Ne.current=e,F(e)&&we!==e&&xe(e),null==pe||pe.registerSubPopup(ye,e)})),Se=m.useState(null),ke=u(Se,2),Me=ke[0],Re=ke[1],Fe=m.useRef(null),Ae=g((function(e){F(e)&&Me!==e&&(Re(e),Fe.current=e)})),qe=m.Children.only(c),ze=(null==qe?void 0:qe.props)||{},Xe={},Je=g((function(e){var t,n,r=Me;return(null==r?void 0:r.contains(e))||(null===(t=q(r))||void 0===t?void 0:t.host)===e||e===r||(null==we?void 0:we.contains(e))||(null===(n=q(we))||void 0===n?void 0:n.host)===e||e===we||Object.values(he.current).some((function(t){return(null==t?void 0:t.contains(e))||e===t}))})),Ze=je(a,te,oe,re),Ue=je(a,ne,ae,ie),Ke=m.useState(y||!1),Qe=u(Ke,2),et=Qe[0],tt=Qe[1],nt=null!=h?h:et,rt=g((function(e){void 0===h&&tt(e)}));E((function(){tt(h||!1)}),[h]);var ot=m.useRef(nt);ot.current=nt;var it=m.useRef([]);it.current=[];var at=g((function(e){var t;rt(e),(null!==(t=it.current[it.current.length-1])&&void 0!==t?t:nt)!==e&&(it.current.push(e),null==b||b(e))})),ut=m.useRef(),ct=function(){clearTimeout(ut.current)},st=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;ct(),0===t?at(e):ut.current=setTimeout((function(){at(e)}),1e3*t)};m.useEffect((function(){return ct}),[]);var lt=m.useState(!1),ft=u(lt,2),dt=ft[0],vt=ft[1];E((function(e){e&&!nt||vt(!0)}),[nt]);var mt=m.useState(null),ht=u(mt,2),pt=ht[0],gt=ht[1],yt=m.useState(null),bt=u(yt,2),Et=bt[0],wt=bt[1],xt=function(e){wt([e.clientX,e.clientY])},Nt=function(e,t,n,r,o,a,c){var s=m.useState({ready:!1,offsetX:0,offsetY:0,offsetR:0,offsetB:0,arrowX:0,arrowY:0,scaleX:1,scaleY:1,align:o[r]||{}}),l=u(s,2),f=l[0],d=l[1],v=m.useRef(0),h=m.useMemo((function(){return t?_e(t):[]}),[t]),p=m.useRef({});e||(p.current={});var y=g((function(){if(t&&n&&e){let e=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:te,r=L.x+e,o=L.y+t,i=r+V,a=o+X,u=Math.max(r,n.left),c=Math.max(o,n.top),s=Math.min(i,n.right),l=Math.min(a,n.bottom);return Math.max(0,(s-u)*(l-c))},St=function(){pe=L.y+Fe,ge=pe+X,ye=L.x+Re,be=ye+V};var s,l,f,v,m,g=t,y=g.ownerDocument,b=Te(g).getComputedStyle(g),E=b.width,w=b.height,x=b.position,N=g.style.left,C=g.style.top,S=g.style.right,k=g.style.bottom,M=g.style.overflow,R=i(i({},o[r]),a),q=y.createElement("div");if(null===(s=g.parentElement)||void 0===s||s.appendChild(q),q.style.left="".concat(g.offsetLeft,"px"),q.style.top="".concat(g.offsetTop,"px"),q.style.position=x,q.style.height="".concat(g.offsetHeight,"px"),q.style.width="".concat(g.offsetWidth,"px"),g.style.left="0",g.style.top="0",g.style.right="auto",g.style.bottom="auto",g.style.overflow="hidden",Array.isArray(n))m={x:n[0],y:n[1],width:0,height:0};else{var P,D,I=n.getBoundingClientRect();I.x=null!==(P=I.x)&&void 0!==P?P:I.left,I.y=null!==(D=I.y)&&void 0!==D?D:I.top,m={x:I.x,y:I.y,width:I.width,height:I.height}}var L=g.getBoundingClientRect();L.x=null!==(l=L.x)&&void 0!==l?l:L.left,L.y=null!==(f=L.y)&&void 0!==f?f:L.top;var O=y.documentElement,j=O.clientWidth,T=O.clientHeight,_=O.scrollWidth,H=O.scrollHeight,z=O.scrollTop,B=O.scrollLeft,X=L.height,V=L.width,Y=m.height,W=m.width,$={left:0,top:0,right:j,bottom:T},G={left:-B,top:-z,right:_-B,bottom:H-z},J=R.htmlRegion,Z="visible",U="visibleFirst";"scroll"!==J&&J!==U&&(J=Z);var K=J===U,Q=Be(G,h),ee=Be($,h),te=J===Z?ee:Q,ne=K?ee:te;g.style.left="auto",g.style.top="auto",g.style.right="0",g.style.bottom="0";var re=g.getBoundingClientRect();g.style.left=N,g.style.top=C,g.style.right=S,g.style.bottom=k,g.style.overflow=M,null===(v=g.parentElement)||void 0===v||v.removeChild(q);var oe=He(Math.round(V/parseFloat(E)*1e3)/1e3),ie=He(Math.round(X/parseFloat(w)*1e3)/1e3);if(0===oe||0===ie||F(n)&&!A(n))return;var ae=R.offset,ue=R.targetOffset,ce=Ve(L,ae),se=u(ce,2),le=se[0],fe=se[1],de=Ve(m,ue),ve=u(de,2),me=ve[0],he=ve[1];m.x-=me,m.y-=he;var pe,ge,ye,be,Ee=R.points||[],we=u(Ee,2),xe=we[0],Ne=Ye(we[1]),Ce=Ye(xe),Se=We(m,Ne),ke=We(L,Ce),Me=i({},R),Re=Se.x-ke.x+le,Fe=Se.y-ke.y+fe,Ae=e(Re,Fe),qe=e(Re,Fe,ee),Pe=We(m,["t","l"]),De=We(L,["t","l"]),Ie=We(m,["b","r"]),Le=We(L,["b","r"]),Oe=R.overflow||{},je=Oe.adjustX,_e=Oe.adjustY,ze=Oe.shiftX,Xe=Oe.shiftY,Ge=function(e){return"boolean"==typeof e?e:e>=0};St();var Je=Ge(_e),Ze=Ce[0]===Ne[0];if(Je&&"t"===Ce[0]&&(ge>ne.bottom||p.current.bt)){var Ue=Fe;Ze?Ue-=X-Y:Ue=Pe.y-Le.y-fe;var Ke=e(Re,Ue),Qe=e(Re,Ue,ee);Ke>Ae||Ke===Ae&&(!K||Qe>=qe)?(p.current.bt=!0,Fe=Ue,fe=-fe,Me.points=[$e(Ce,0),$e(Ne,0)]):p.current.bt=!1}if(Je&&"b"===Ce[0]&&(pe<ne.top||p.current.tb)){var et=Fe;Ze?et+=X-Y:et=Ie.y-De.y-fe;var tt=e(Re,et),nt=e(Re,et,ee);tt>Ae||tt===Ae&&(!K||nt>=qe)?(p.current.tb=!0,Fe=et,fe=-fe,Me.points=[$e(Ce,0),$e(Ne,0)]):p.current.tb=!1}var rt=Ge(je),ot=Ce[1]===Ne[1];if(rt&&"l"===Ce[1]&&(be>ne.right||p.current.rl)){var it=Re;ot?it-=V-W:it=Pe.x-Le.x-le;var at=e(it,Fe),ut=e(it,Fe,ee);at>Ae||at===Ae&&(!K||ut>=qe)?(p.current.rl=!0,Re=it,le=-le,Me.points=[$e(Ce,1),$e(Ne,1)]):p.current.rl=!1}if(rt&&"r"===Ce[1]&&(ye<ne.left||p.current.lr)){var ct=Re;ot?ct+=V-W:ct=Ie.x-De.x-le;var st=e(ct,Fe),lt=e(ct,Fe,ee);st>Ae||st===Ae&&(!K||lt>=qe)?(p.current.lr=!0,Re=ct,le=-le,Me.points=[$e(Ce,1),$e(Ne,1)]):p.current.lr=!1}St();var ft=!0===ze?0:ze;"number"==typeof ft&&(ye<ee.left&&(Re-=ye-ee.left-le,m.x+W<ee.left+ft&&(Re+=m.x-ee.left+W-ft)),be>ee.right&&(Re-=be-ee.right-le,m.x>ee.right-ft&&(Re+=m.x-ee.right+ft)));var dt=!0===Xe?0:Xe;"number"==typeof dt&&(pe<ee.top&&(Fe-=pe-ee.top-fe,m.y+Y<ee.top+dt&&(Fe+=m.y-ee.top+Y-dt)),ge>ee.bottom&&(Fe-=ge-ee.bottom-fe,m.y>ee.bottom-dt&&(Fe+=m.y-ee.bottom+dt)));var vt=L.x+Re,mt=vt+V,ht=L.y+Fe,pt=ht+X,gt=m.x,yt=gt+W,bt=m.y,Et=bt+Y,wt=(Math.max(vt,gt)+Math.min(mt,yt))/2-vt,xt=(Math.max(ht,bt)+Math.min(pt,Et))/2-ht;null==c||c(t,Me);var Nt=re.right-L.x-(Re+L.width),Ct=re.bottom-L.y-(Fe+L.height);1===oe&&(Re=Math.round(Re),Nt=Math.round(Nt)),1===ie&&(Fe=Math.round(Fe),Ct=Math.round(Ct)),d({ready:!0,offsetX:Re/oe,offsetY:Fe/ie,offsetR:Nt/oe,offsetB:Ct/ie,arrowX:wt/oe,arrowY:xt/ie,scaleX:oe,scaleY:ie,align:Me})}})),b=function(){d((function(e){return i(i({},e),{},{ready:!1})}))};return E(b,[r]),E((function(){e||b()}),[e]),[f.ready,f.offsetX,f.offsetY,f.offsetR,f.offsetB,f.arrowX,f.arrowY,f.scaleX,f.scaleY,f.align,function(){v.current+=1;var e=v.current;Promise.resolve().then((function(){v.current===e&&y()}))}]}(nt,we,U&&null!==Et?Et:Me,X,Y,W,Q),Ct=u(Nt,11),St=Ct[0],kt=Ct[1],Mt=Ct[2],Rt=Ct[3],Ft=Ct[4],At=Ct[5],qt=Ct[6],Pt=Ct[7],Dt=Ct[8],It=Ct[9],Lt=Ct[10],Ot=function(e,t,n,r){return m.useMemo((function(){var o=Le(null!=n?n:t),i=Le(null!=r?r:t),a=new Set(o),u=new Set(i);return e&&(a.has("hover")&&(a.delete("hover"),a.add("click")),u.has("hover")&&(u.delete("hover"),u.add("click"))),[a,u]}),[e,t,n,r])}(ve,f,d,v),jt=u(Ot,2),Tt=jt[0],_t=jt[1],Ht=Tt.has("click"),zt=_t.has("click")||_t.has("contextMenu"),Bt=g((function(){dt||Lt()}));!function(e,t,n,r,o){E((function(){if(e&&t&&n){let e=function(){r(),o()};var i=n,a=_e(t),u=_e(i),c=Te(i),s=new Set([c].concat(l(a),l(u)));return s.forEach((function(t){t.addEventListener("scroll",e,{passive:!0})})),c.addEventListener("resize",e,{passive:!0}),r(),function(){s.forEach((function(t){t.removeEventListener("scroll",e),c.removeEventListener("resize",e)}))}}}),[e,t,n])}(nt,Me,we,Bt,(function(){ot.current&&U&&zt&&st(!1)})),E((function(){Bt()}),[Et,X]),E((function(){!nt||null!=Y&&Y[X]||Bt()}),[JSON.stringify(W)]);var Xt=m.useMemo((function(){var e=function(e,t,n,r){for(var o=n.points,i=Object.keys(e),a=0;a<i.length;a+=1){var u,c=i[a];if(Oe(null===(u=e[c])||void 0===u?void 0:u.points,o,r))return"".concat(t,"-placement-").concat(c)}return""}(Y,a,It,U);return p(e,null==J?void 0:J(It))}),[It,J,Y,a,U]);m.useImperativeHandle(n,(function(){return{nativeElement:Fe.current,popupElement:Ne.current,forceAlign:Bt}}));var Vt=m.useState(0),Yt=u(Vt,2),Wt=Yt[0],$t=Yt[1],Gt=m.useState(0),Jt=u(Gt,2),Zt=Jt[0],Ut=Jt[1],Kt=function(){if(G&&Me){var e=Me.getBoundingClientRect();$t(e.width),Ut(e.height)}};function Qt(e,t,n,r){Xe[e]=function(o){var i;null==r||r(o),st(t,n);for(var a=arguments.length,u=new Array(a>1?a-1:0),c=1;c<a;c++)u[c-1]=arguments[c];null===(i=ze[e])||void 0===i||i.call.apply(i,[ze,o].concat(u))}}E((function(){pt&&(Lt(),pt(),gt(null))}),[pt]),(Ht||zt)&&(Xe.onClick=function(e){var t;ot.current&&zt?st(!1):!ot.current&&Ht&&(xt(e),st(!0));for(var n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];null===(t=ze.onClick)||void 0===t||t.call.apply(t,[ze,e].concat(r))});var en,tn,nn=function(e,t,n,r,o,i,a,u){var c=m.useRef(e);c.current=e;var s=m.useRef(!1);return m.useEffect((function(){if(t&&r&&(!o||i)){var e=function(){s.current=!1},l=function(e){var t;!c.current||a((null===(t=e.composedPath)||void 0===t||null===(t=t.call(e))||void 0===t?void 0:t[0])||e.target)||s.current||u(!1)},f=Te(r);f.addEventListener("pointerdown",e,!0),f.addEventListener("mousedown",l,!0),f.addEventListener("contextmenu",l,!0);var d=q(n);return d&&(d.addEventListener("mousedown",l,!0),d.addEventListener("contextmenu",l,!0)),function(){f.removeEventListener("pointerdown",e,!0),f.removeEventListener("mousedown",l,!0),f.removeEventListener("contextmenu",l,!0),d&&(d.removeEventListener("mousedown",l,!0),d.removeEventListener("contextmenu",l,!0))}}}),[t,n,r,o,i]),function(){s.current=!0}}(nt,zt,Me,we,M,I,Je,st),rn=Tt.has("hover"),on=_t.has("hover");rn&&(Qt("onMouseEnter",!0,x,(function(e){xt(e)})),Qt("onPointerEnter",!0,x,(function(e){xt(e)})),en=function(e){(nt||dt)&&null!=we&&we.contains(e.target)&&st(!0,x)},U&&(Xe.onMouseMove=function(e){var t;null===(t=ze.onMouseMove)||void 0===t||t.call(ze,e)})),on&&(Qt("onMouseLeave",!1,C),Qt("onPointerLeave",!1,C),tn=function(){st(!1,C)}),Tt.has("focus")&&Qt("onFocus",!0,S),_t.has("focus")&&Qt("onBlur",!1,k),Tt.has("contextMenu")&&(Xe.onContextMenu=function(e){var t;ot.current&&_t.has("contextMenu")?st(!1):(xt(e),st(!0)),e.preventDefault();for(var n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];null===(t=ze.onContextMenu)||void 0===t||t.call.apply(t,[ze,e].concat(r))}),ue&&(Xe.className=p(ze.className,ue));var an=i(i({},ze),Xe),un={};["onContextMenu","onClick","onMouseDown","onTouchStart","onMouseEnter","onMouseLeave","onFocus","onBlur"].forEach((function(e){se[e]&&(un[e]=function(){for(var t,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];null===(t=an[e])||void 0===t||t.call.apply(t,[an].concat(r)),se[e].apply(se,r)})}));var cn=m.cloneElement(qe,i(i({},an),un)),sn={x:At,y:qt},ln=ee?i({},!0!==ee?ee:{}):null;return m.createElement(m.Fragment,null,m.createElement(L,{disabled:!nt,ref:Ae,onResize:function(){Kt(),Bt()}},m.createElement(De,{getTriggerDOMNode:ce},cn)),m.createElement(Ie.Provider,{value:ge},m.createElement(Pe,{portal:e,ref:Ce,prefixCls:a,popup:H,className:p(z,Xt),style:B,target:Me,onMouseEnter:en,onMouseLeave:tn,onPointerEnter:en,zIndex:$,open:nt,keepDom:dt,fresh:Z,onClick:K,onPointerDownCapture:nn,mask:M,motion:Ze,maskMotion:Ue,onVisibleChanged:function(e){vt(!1),Lt(),null==w||w(e)},onPrepare:function(){return new Promise((function(e){Kt(),gt((function(){return e}))}))},forceRender:j,autoDestroy:le,getPopupContainer:O,align:It,arrow:ln,arrowPos:sn,ready:St,offsetX:kt,offsetY:Mt,offsetR:Rt,offsetB:Ft,onAlign:Bt,stretch:G,targetWidth:Wt/Pt,targetHeight:Zt/Dt})))}))}(ue);function Ze(){return"function"==typeof BigInt}function Ue(e){return!e&&0!==e&&!Number.isNaN(e)||!String(e).trim()}function Ke(e){var t=e.trim(),n=t.startsWith("-");n&&(t=t.slice(1)),(t=t.replace(/(\.\d*[^0])0*$/,"$1").replace(/\.0*$/,"").replace(/^0+/,"")).startsWith(".")&&(t="0".concat(t));var r=t||"0",o=r.split("."),i=o[0]||"0",a=o[1]||"0";"0"===i&&"0"===a&&(n=!1);var u=n?"-":"";return{negative:n,negativeStr:u,trimStr:r,integerStr:i,decimalStr:a,fullStr:"".concat(u).concat(r)}}function Qe(e){var t=String(e);return!Number.isNaN(Number(t))&&t.includes("e")}function et(e){var t=String(e);if(Qe(e)){var n=Number(t.slice(t.indexOf("e-")+2)),r=t.match(/\.(\d+)/);return null!=r&&r[1]&&(n+=r[1].length),n}return t.includes(".")&&nt(t)?t.length-t.indexOf(".")-1:0}function tt(e){var t=String(e);if(Qe(e)){if(e>Number.MAX_SAFE_INTEGER)return String(Ze()?BigInt(e).toString():Number.MAX_SAFE_INTEGER);if(e<Number.MIN_SAFE_INTEGER)return String(Ze()?BigInt(e).toString():Number.MIN_SAFE_INTEGER);t=e.toFixed(et(t))}return Ke(t).fullStr}function nt(e){return"number"==typeof e?!Number.isNaN(e):!!e&&(/^\s*-?\d+(\.\d+)?\s*$/.test(e)||/^\s*-?\d+\.\s*$/.test(e)||/^\s*-?\.\d+\s*$/.test(e))}var rt=function(){function e(t){if(n(this,e),c(this,"origin",""),c(this,"negative",void 0),c(this,"integer",void 0),c(this,"decimal",void 0),c(this,"decimalLen",void 0),c(this,"empty",void 0),c(this,"nan",void 0),Ue(t))this.empty=!0;else if(this.origin=String(t),"-"===t||Number.isNaN(t))this.nan=!0;else{var r=t;if(Qe(r)&&(r=Number(r)),nt(r="string"==typeof r?r:tt(r))){var o=Ke(r);this.negative=o.negative;var i=o.trimStr.split(".");this.integer=BigInt(i[0]);var a=i[1]||"0";this.decimal=BigInt(a),this.decimalLen=a.length}else this.nan=!0}}return r(e,[{key:"getMark",value:function(){return this.negative?"-":""}},{key:"getIntegerStr",value:function(){return this.integer.toString()}},{key:"getDecimalStr",value:function(){return this.decimal.toString().padStart(this.decimalLen,"0")}},{key:"alignDecimal",value:function(e){var t="".concat(this.getMark()).concat(this.getIntegerStr()).concat(this.getDecimalStr().padEnd(e,"0"));return BigInt(t)}},{key:"negate",value:function(){var t=new e(this.toString());return t.negative=!t.negative,t}},{key:"cal",value:function(t,n,r){var o=Math.max(this.getDecimalStr().length,t.getDecimalStr().length),i=n(this.alignDecimal(o),t.alignDecimal(o)).toString(),a=r(o),u=Ke(i),c=u.negativeStr,s=u.trimStr,l="".concat(c).concat(s.padStart(a+1,"0"));return new e("".concat(l.slice(0,-a),".").concat(l.slice(-a)))}},{key:"add",value:function(t){if(this.isInvalidate())return new e(t);var n=new e(t);return n.isInvalidate()?this:this.cal(n,(function(e,t){return e+t}),(function(e){return e}))}},{key:"multi",value:function(t){var n=new e(t);return this.isInvalidate()||n.isInvalidate()?new e(NaN):this.cal(n,(function(e,t){return e*t}),(function(e){return 2*e}))}},{key:"isEmpty",value:function(){return this.empty}},{key:"isNaN",value:function(){return this.nan}},{key:"isInvalidate",value:function(){return this.isEmpty()||this.isNaN()}},{key:"equals",value:function(e){return this.toString()===(null==e?void 0:e.toString())}},{key:"lessEquals",value:function(e){return this.add(e.negate().toString()).toNumber()<=0}},{key:"toNumber",value:function(){return this.isNaN()?NaN:Number(this.toString())}},{key:"toString",value:function(){return!(arguments.length>0&&void 0!==arguments[0])||arguments[0]?this.isInvalidate()?"":Ke("".concat(this.getMark()).concat(this.getIntegerStr(),".").concat(this.getDecimalStr())).fullStr:this.origin}}]),e}(),ot=function(){function e(t){n(this,e),c(this,"origin",""),c(this,"number",void 0),c(this,"empty",void 0),Ue(t)?this.empty=!0:(this.origin=String(t),this.number=Number(t))}return r(e,[{key:"negate",value:function(){return new e(-this.toNumber())}},{key:"add",value:function(t){if(this.isInvalidate())return new e(t);var n=Number(t);if(Number.isNaN(n))return this;var r=this.number+n;if(r>Number.MAX_SAFE_INTEGER)return new e(Number.MAX_SAFE_INTEGER);if(r<Number.MIN_SAFE_INTEGER)return new e(Number.MIN_SAFE_INTEGER);var o=Math.max(et(this.number),et(n));return new e(r.toFixed(o))}},{key:"multi",value:function(t){var n=Number(t);if(this.isInvalidate()||Number.isNaN(n))return new e(NaN);var r=this.number*n;if(r>Number.MAX_SAFE_INTEGER)return new e(Number.MAX_SAFE_INTEGER);if(r<Number.MIN_SAFE_INTEGER)return new e(Number.MIN_SAFE_INTEGER);var o=Math.max(et(this.number),et(n));return new e(r.toFixed(o))}},{key:"isEmpty",value:function(){return this.empty}},{key:"isNaN",value:function(){return Number.isNaN(this.number)}},{key:"isInvalidate",value:function(){return this.isEmpty()||this.isNaN()}},{key:"equals",value:function(e){return this.toNumber()===(null==e?void 0:e.toNumber())}},{key:"lessEquals",value:function(e){return this.add(e.negate().toString()).toNumber()<=0}},{key:"toNumber",value:function(){return this.number}},{key:"toString",value:function(){return!(arguments.length>0&&void 0!==arguments[0])||arguments[0]?this.isInvalidate()?"":tt(this.number):this.origin}}]),e}();function it(e){return Ze()?new rt(e):new ot(e)}function at(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(""===e)return"";var o=Ke(e),i=o.negativeStr,a=o.integerStr,u=o.decimalStr,c="".concat(t).concat(u),s="".concat(i).concat(a);if(n>=0){var l=Number(u[n]);return l>=5&&!r?at(it(e).add("".concat(i,"0.").concat("0".repeat(n)).concat(10-l)).toString(),t,n,r):0===n?s:"".concat(s).concat(t).concat(u.padEnd(n,"0").slice(0,n))}return".0"===c?s:"".concat(s).concat(c)}v.Component;var ut={subtree:!0,childList:!0,attributeFilter:["style","class"]};function ct(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:ut;m.useEffect((function(){if(b()&&e){var r,o=Array.isArray(e)?e:[e];return"MutationObserver"in window&&(r=new MutationObserver(t),o.forEach((function(e){r.observe(e,n)}))),function(){var e,t;null===(e=r)||void 0===e||e.takeRecords(),null===(t=r)||void 0===t||t.disconnect()}}}),[n,e])}export{H as C,ue as P,Re as S,Je as T,Y as a,ee as b,et as c,at as d,it as g,tt as n,Ke as t,ct as u,nt as v};
