var e,t={};var n=function(){if(e)return t;e=1,Object.defineProperty(t,"__esModule",{value:!0}),t.TokenData=void 0,t.parse=f,t.compile=function(e,t={}){const{encode:r=encodeURIComponent,delimiter:o=n}=t,c=l((e instanceof p?e:f(e,t)).tokens,o,r);return function(e={}){const[t,...n]=c(e);if(n.length)throw new TypeError("Missing parameters: ".concat(n.join(", ")));return t}},t.match=function(e,t={}){const{decode:o=decodeURIComponent,delimiter:c=n}=t,{regexp:i,keys:s}=y(e,t),a=s.map((e=>!1===o?r:"param"===e.type?o:e=>e.split(c).map(o)));return function(e){const t=i.exec(e);if(!t)return!1;const n=t[0],r=Object.create(null);for(let o=1;o<t.length;o++){if(void 0===t[o])continue;const e=s[o-1],n=a[o-1];r[e.name]=n(t[o])}return{path:n,params:r}}},t.pathToRegexp=y,t.stringify=function(e){return e.tokens.map((function e(t,n,r){if("text"===t.type)return t.value.replace(/[{}()\[\]+?!:*]/g,"\\$&");if("group"===t.type)return"{".concat(t.tokens.map(e).join(""),"}");const i=function(e){const[t,...n]=e;return!!o.test(t)&&n.every((e=>c.test(e)))}(t.name)&&function(e){return"text"!==(null==e?void 0:e.type)||!c.test(e.value[0])}(r[n+1]),s=i?t.name:JSON.stringify(t.name);if("param"===t.type)return":".concat(s);if("wildcard"===t.type)return"*".concat(s);throw new TypeError("Unexpected token: ".concat(t))})).join("")};const n="/",r=e=>e,o=/^[$_\p{ID_Start}]$/u,c=/^[$\u200c\u200d\p{ID_Continue}]$/u,i="https://git.new/pathToRegexpError",s={"{":"{","}":"}","(":"(",")":")","[":"[","]":"]","+":"+","?":"?","!":"!"};function a(e){return e.replace(/[.+*?^${}()[\]|/\\]/g,"\\$&")}class u{constructor(e){this.tokens=e}peek(){if(!this._peek){const e=this.tokens.next();this._peek=e.value}return this._peek}tryConsume(e){const t=this.peek();if(t.type===e)return this._peek=void 0,t.value}consume(e){const t=this.tryConsume(e);if(void 0!==t)return t;const{type:n,index:r}=this.peek();throw new TypeError("Unexpected ".concat(n," at ").concat(r,", expected ").concat(e,": ").concat(i))}text(){let e,t="";for(;e=this.tryConsume("CHAR")||this.tryConsume("ESCAPED");)t+=e;return t}}class p{constructor(e){this.tokens=e}}function f(e,t={}){const{encodePath:n=r}=t,a=new u(function*(e){const t=[...e];let n=0;function r(){let e="";if(o.test(t[++n]))for(e+=t[n];c.test(t[++n]);)e+=t[n];else if('"'===t[n]){let r=n;for(;n<t.length;){if('"'===t[++n]){n++,r=0;break}e+="\\"===t[n]?t[++n]:t[n]}if(r)throw new TypeError("Unterminated quote at ".concat(r,": ").concat(i))}if(!e)throw new TypeError("Missing parameter name at ".concat(n,": ").concat(i));return e}for(;n<t.length;){const e=t[n],o=s[e];if(o)yield{type:o,index:n++,value:e};else if("\\"===e)yield{type:"ESCAPED",index:n++,value:t[n++]};else if(":"===e){const e=r();yield{type:"PARAM",index:n,value:e}}else if("*"===e){const e=r();yield{type:"WILDCARD",index:n,value:e}}else yield{type:"CHAR",index:n,value:t[n++]}}return{type:"END",index:n,value:""}}(e));const f=function e(t){const r=[];for(;;){const o=a.text();o&&r.push({type:"text",value:n(o)});const c=a.tryConsume("PARAM");if(c){r.push({type:"param",name:c});continue}const i=a.tryConsume("WILDCARD");if(i){r.push({type:"wildcard",name:i});continue}if(!a.tryConsume("{"))return a.consume(t),r;r.push({type:"group",tokens:e("}")})}}("END");return new p(f)}function l(e,t,n){const o=e.map((e=>function(e,t,n){if("text"===e.type)return()=>[e.value];if("group"===e.type){const r=l(e.tokens,t,n);return e=>{const[t,...n]=r(e);return n.length?[""]:[t]}}const o=n||r;if("wildcard"===e.type&&!1!==n)return n=>{const r=n[e.name];if(null==r)return["",e.name];if(!Array.isArray(r)||0===r.length)throw new TypeError('Expected "'.concat(e.name,'" to be a non-empty array'));return[r.map(((t,n)=>{if("string"!=typeof t)throw new TypeError('Expected "'.concat(e.name,"/").concat(n,'" to be a string'));return o(t)})).join(t)]};return t=>{const n=t[e.name];if(null==n)return["",e.name];if("string"!=typeof n)throw new TypeError('Expected "'.concat(e.name,'" to be a string'));return[o(n)]}}(e,t,n)));return e=>{const t=[""];for(const n of o){const[r,...o]=n(e);t[0]+=r,t.push(...o)}return t}}function y(e,t={}){const{delimiter:r=n,end:o=!0,sensitive:c=!1,trailing:i=!0}=t,s=[],u=[],l=c?"":"i",y=(Array.isArray(e)?e:[e]).map((e=>e instanceof p?e:f(e,t)));for(const{tokens:n}of y)for(const e of d(n,0,[])){const t=m(e,r,s);u.push(t)}let h="^(?:".concat(u.join("|"),")");i&&(h+="(?:".concat(a(r),"$)?")),h+=o?"$":"(?=".concat(a(r),"|$)");return{regexp:new RegExp(h,l),keys:s}}function*d(e,t,n){if(t===e.length)return yield n;const r=e[t];if("group"===r.type){const o=n.slice();for(const n of d(r.tokens,0,o))yield*d(e,t+1,n)}else n.push(r);yield*d(e,t+1,n)}function m(e,t,n){let r="",o="",c=!0;for(let s=0;s<e.length;s++){const u=e[s];if("text"!==u.type)if("param"!==u.type&&"wildcard"!==u.type);else{if(!c&&!o)throw new TypeError('Missing text after "'.concat(u.name,'": ').concat(i));"param"===u.type?r+="(".concat(h(t,c?"":o),"+)"):r+="([\\s\\S]+)",n.push(u),o="",c=!1}else r+=a(u.value),o+=u.value,c||(c=u.value.includes(t))}return r}function h(e,t){return t.length<2?e.length<2?"[^".concat(a(e+t),"]"):"(?:(?!".concat(a(e),")[^").concat(a(t),"])"):e.length<2?"(?:(?!".concat(a(t),")[^").concat(a(e),"])"):"(?:(?!".concat(a(t),"|").concat(a(e),")[\\s\\S])")}return t.TokenData=p,t}();export{n as d};
