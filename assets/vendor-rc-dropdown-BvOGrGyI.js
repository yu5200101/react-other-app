import{c as e,d as o,e as t,_ as n}from"./vendor-@babel-IoAzJ7sT.js";import{T as r}from"./vendor-@rc-component-Dsuwcs3B.js";import{c as i}from"./vendor-classnames-C6ZHPJN9.js";import{B as a,K as s,p as l,v as c,m as f}from"./vendor-rc-util-C7GvDjgY.js";import{r as u,R as p}from"./vendor-react-BVfqOVDk.js";var v=s.ESC,m=s.TAB;var d=u.forwardRef((function(e,o){var t=e.overlay,n=e.arrow,r=e.prefixCls,i=u.useMemo((function(){return"function"==typeof t?t():t}),[t]),a=l(o,c(i));return p.createElement(p.Fragment,null,n&&p.createElement("div",{className:"".concat(r,"-arrow")}),p.cloneElement(i,{ref:f(i)?a:void 0}))})),g={adjustX:1,adjustY:1},w=[0,0],b={topLeft:{points:["bl","tl"],overflow:g,offset:[0,-4],targetOffset:w},top:{points:["bc","tc"],overflow:g,offset:[0,-4],targetOffset:w},topRight:{points:["br","tr"],overflow:g,offset:[0,-4],targetOffset:w},bottomLeft:{points:["tl","bl"],overflow:g,offset:[0,4],targetOffset:w},bottom:{points:["tc","bc"],overflow:g,offset:[0,4],targetOffset:w},bottomRight:{points:["tr","br"],overflow:g,offset:[0,4],targetOffset:w}},h=["arrow","prefixCls","transitionName","animation","align","placement","placements","getPopupContainer","showAction","hideAction","overlayClassName","overlayStyle","visible","trigger","autoFocus","overlay","children","onVisibleChange"];function y(s,g){var w,y=s.arrow,C=void 0!==y&&y,R=s.prefixCls,E=void 0===R?"rc-dropdown":R,N=s.transitionName,O=s.animation,x=s.align,A=s.placement,P=void 0===A?"bottomLeft":A,j=s.placements,k=void 0===j?b:j,V=s.getPopupContainer,F=s.showAction,L=s.hideAction,S=s.overlayClassName,T=s.overlayStyle,M=s.visible,W=s.trigger,B=void 0===W?["hover"]:W,D=s.autoFocus,H=s.overlay,I=s.children,K=s.onVisibleChange,X=e(s,h),Y=p.useState(),_=o(Y,2),q=_[0],z=_[1],G="visible"in s?M:q,J=p.useRef(null),Q=p.useRef(null),U=p.useRef(null);p.useImperativeHandle(g,(function(){return J.current}));var Z=function(e){z(e),null==K||K(e)};!function(e){var o=e.visible,t=e.triggerRef,n=e.onVisibleChange,r=e.autoFocus,i=e.overlayRef,s=u.useRef(!1),l=function(){var e,r;o&&(null===(e=t.current)||void 0===e||null===(r=e.focus)||void 0===r||r.call(e),null==n||n(!1))},c=function(){var e;return!(null===(e=i.current)||void 0===e||!e.focus||(i.current.focus(),s.current=!0,0))},f=function(e){switch(e.keyCode){case v:l();break;case m:var o=!1;s.current||(o=c()),o?e.preventDefault():l()}};u.useEffect((function(){return o?(window.addEventListener("keydown",f),r&&a(c,3),function(){window.removeEventListener("keydown",f),s.current=!1}):function(){s.current=!1}}),[o])}({visible:G,triggerRef:U,onVisibleChange:Z,autoFocus:D,overlayRef:Q});var $,ee,oe,te=function(){return p.createElement(d,{ref:Q,overlay:H,prefixCls:E,arrow:C})},ne=p.cloneElement(I,{className:i(null===(w=I.props)||void 0===w?void 0:w.className,G&&($=s.openClassName,void 0!==$?$:"".concat(E,"-open"))),ref:f(I)?l(U,c(I)):void 0}),re=L;return re||-1===B.indexOf("contextMenu")||(re=["click"]),p.createElement(r,t({builtinPlacements:k},X,{prefixCls:E,ref:J,popupClassName:i(S,n({},"".concat(E,"-show-arrow"),C)),popupStyle:T,action:B,showAction:F,hideAction:re,popupPlacement:P,popupAlign:x,popupTransitionName:N,popupAnimation:O,popupVisible:G,stretch:(ee=s.minOverlayWidthMatchTrigger,oe=s.alignPoint,("minOverlayWidthMatchTrigger"in s?ee:!oe)?"minWidth":""),popup:"function"==typeof H?te:te(),onPopupVisibleChange:Z,onPopupClick:function(e){var o=s.onOverlayClick;z(!1),o&&o(e)},getPopupContainer:V}),ne)}const C=p.forwardRef(y);export{C as D};
