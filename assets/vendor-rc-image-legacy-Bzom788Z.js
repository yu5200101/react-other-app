System.register(["./vendor-@babel-legacy-DqmqKj3h.js","./vendor-classnames-legacy-FF-SgJeE.js","./vendor-rc-util-legacy-ydZTfFiK.js","./vendor-react-legacy-Cc0hGaC1.js","./vendor-rc-dialog-legacy-DykGeU91.js","./vendor-@rc-component-legacy-trfl0X7C.js","./vendor-rc-motion-legacy-xNCgQ6X4.js"],(function(e,n){"use strict";var t,o,r,a,i,c,l,s,u,f,m,d,v,p,g,h,C,y,b,w;return{setters:[function(e){t=e._,o=e.b,r=e.d,a=e.c,i=e.e,c=e.h,l=e.a},function(e){s=e.c},function(e){u=e.K,f=e.D,m=e.B,d=e.N,v=e.O,p=e.f,g=e.P},function(e){h=e.r,C=e.R},function(e){y=e.D},function(e){b=e.P},function(e){w=e.C}],execute:function(){var n=h.createContext(null),x=function(e){var r=e.visible,a=e.maskTransitionName,i=e.getContainer,c=e.prefixCls,l=e.rootClassName,f=e.icons,m=e.countRender,d=e.showSwitch,v=e.showProgress,p=e.current,g=e.transform,C=e.count,y=e.scale,x=e.minScale,R=e.maxScale,k=e.closeIcon,E=e.onActive,S=e.onClose,N=e.onZoomIn,T=e.onZoomOut,I=e.onRotateRight,Y=e.onRotateLeft,P=e.onFlipX,X=e.onFlipY,M=e.onReset,z=e.toolbarRender,Z=e.zIndex,L=e.image,j=h.useContext(n),O=f.rotateLeft,D=f.rotateRight,F=f.zoomIn,W=f.zoomOut,H=f.close,A=f.left,V=f.right,B=f.flipX,G=f.flipY,K="".concat(c,"-operations-operation");h.useEffect((function(){var e=function(e){e.keyCode===u.ESC&&S()};return r&&window.addEventListener("keydown",e),function(){window.removeEventListener("keydown",e)}}),[r]);var U=function(e,n){e.preventDefault(),e.stopPropagation(),E(n)},_=h.useCallback((function(e){var n=e.type,o=e.disabled,r=e.onClick,a=e.icon;return h.createElement("div",{key:n,className:s(K,"".concat(c,"-operations-operation-").concat(n),t({},"".concat(c,"-operations-operation-disabled"),!!o)),onClick:r},a)}),[K,c]),q=d?_({icon:A,onClick:function(e){return U(e,-1)},type:"prev",disabled:0===p}):void 0,J=d?_({icon:V,onClick:function(e){return U(e,1)},type:"next",disabled:p===C-1}):void 0,Q=_({icon:G,onClick:X,type:"flipY"}),$=_({icon:B,onClick:P,type:"flipX"}),ee=_({icon:O,onClick:Y,type:"rotateLeft"}),ne=_({icon:D,onClick:I,type:"rotateRight"}),te=_({icon:W,onClick:T,type:"zoomOut",disabled:y<=x}),oe=_({icon:F,onClick:N,type:"zoomIn",disabled:y===R}),re=h.createElement("div",{className:"".concat(c,"-operations")},Q,$,ee,ne,te,oe);return h.createElement(w,{visible:r,motionName:a},(function(e){var n=e.className,r=e.style;return h.createElement(b,{open:!0,getContainer:null!=i?i:document.body},h.createElement("div",{className:s("".concat(c,"-operations-wrapper"),n,l),style:o(o({},r),{},{zIndex:Z})},null===k?null:h.createElement("button",{className:"".concat(c,"-close"),onClick:S},k||H),d&&h.createElement(h.Fragment,null,h.createElement("div",{className:s("".concat(c,"-switch-left"),t({},"".concat(c,"-switch-left-disabled"),0===p)),onClick:function(e){return U(e,-1)}},A),h.createElement("div",{className:s("".concat(c,"-switch-right"),t({},"".concat(c,"-switch-right-disabled"),p===C-1)),onClick:function(e){return U(e,1)}},V)),h.createElement("div",{className:"".concat(c,"-footer")},v&&h.createElement("div",{className:"".concat(c,"-progress")},m?m(p+1,C):h.createElement("bdi",null,"".concat(p+1," / ").concat(C))),z?z(re,o(o({icons:{prevIcon:q,nextIcon:J,flipYIcon:Q,flipXIcon:$,rotateLeftIcon:ee,rotateRightIcon:ne,zoomOutIcon:te,zoomInIcon:oe},actions:{onActive:E,onFlipY:X,onFlipX:P,onRotateLeft:Y,onRotateRight:I,onZoomOut:T,onZoomIn:N,onReset:M,onClose:S},transform:g},j?{current:p,total:C}:{}),{},{image:L})):re)))}))},R={x:0,y:0,rotate:0,scale:1,flipX:!1,flipY:!1};function k(e,n,o,r){var a=n+o,i=(o-r)/2;if(o>r){if(n>0)return t({},e,i);if(n<0&&a<r)return t({},e,-i)}else if(n<0||a>r)return t({},e,n<0?i:-i);return{}}function E(e,n,t,r){var a=d(),i=a.width,c=a.height,l=null;return e<=i&&n<=c?l={x:0,y:0}:(e>i||n>c)&&(l=o(o({},k("x",t,e,i)),k("y",r,n,c))),l}function S(e){var n=e.src,t=e.isCustomPlaceholder,o=e.fallback,a=h.useState(t?"loading":"normal"),i=r(a,2),c=i[0],l=i[1],s=h.useRef(!1),u="error"===c;h.useEffect((function(){var e=!0;return function(e){return new Promise((function(n){if(e){var t=document.createElement("img");t.onerror=function(){return n(!1)},t.onload=function(){return n(!0)},t.src=e}else n(!1)}))}(n).then((function(n){!n&&e&&l("error")})),function(){e=!1}}),[n]),h.useEffect((function(){t&&!s.current?l("loading"):u&&l("normal")}),[n]);var f=function(){l("normal")};return[function(e){s.current=!1,"loading"===c&&null!=e&&e.complete&&(e.naturalWidth||e.naturalHeight)&&(s.current=!0,f())},u&&o?{src:o}:{onLoad:f,src:n},c]}function N(e,n){var t=e.x-n.x,o=e.y-n.y;return Math.hypot(t,o)}function T(e,n,t,a,i,c,l){var s=i.rotate,u=i.scale,f=i.x,m=i.y,d=h.useState(!1),p=r(d,2),g=p[0],C=p[1],y=h.useRef({point1:{x:0,y:0},point2:{x:0,y:0},eventType:"none"}),b=function(e){y.current=o(o({},y.current),e)};return h.useEffect((function(){var e;return t&&n&&(e=v(window,"touchmove",(function(e){return e.preventDefault()}),{passive:!1})),function(){var n;null===(n=e)||void 0===n||n.remove()}}),[t,n]),{isTouching:g,onTouchStart:function(e){if(n){e.stopPropagation(),C(!0);var t=e.touches,o=void 0===t?[]:t;o.length>1?b({point1:{x:o[0].clientX,y:o[0].clientY},point2:{x:o[1].clientX,y:o[1].clientY},eventType:"touchZoom"}):b({point1:{x:o[0].clientX-f,y:o[0].clientY-m},eventType:"move"})}},onTouchMove:function(e){var n=e.touches,t=void 0===n?[]:n,o=y.current,a=o.point1,i=o.point2,s=o.eventType;if(t.length>1&&"touchZoom"===s){var u={x:t[0].clientX,y:t[0].clientY},f={x:t[1].clientX,y:t[1].clientY},m=function(e,n,t,o){var r=N(e,t),a=N(n,o);if(0===r&&0===a)return[e.x,e.y];var i=r/(r+a);return[e.x+i*(n.x-e.x),e.y+i*(n.y-e.y)]}(a,i,u,f),d=r(m,2),v=d[0],p=d[1],g=N(u,f)/N(a,i);l(g,"touchZoom",v,p,!0),b({point1:u,point2:f,eventType:"touchZoom"})}else"move"===s&&(c({x:t[0].clientX-a.x,y:t[0].clientY-a.y},"move"),b({eventType:"move"}))},onTouchEnd:function(){if(t){if(g&&C(!1),b({eventType:"none"}),a>u)return c({x:0,y:0,scale:a},"touchZoom");var n=e.current.offsetWidth*u,r=e.current.offsetHeight*u,i=e.current.getBoundingClientRect(),l=i.left,f=i.top,m=s%180!=0,d=E(m?r:n,m?n:r,l,f);d&&c(o({},d),"dragRebound")}}}}var I=["fallback","src","imgRef"],Y=["prefixCls","src","alt","imageInfo","fallback","movable","onClose","visible","icons","rootClassName","closeIcon","getContainer","current","count","countRender","scaleStep","minScale","maxScale","transitionName","maskTransitionName","imageRender","imgCommonProps","toolbarRender","onTransform","onChange"],P=function(e){var n=e.fallback,t=e.src,o=e.imgRef,c=a(e,I),l=S({src:t,fallback:n}),s=r(l,2),u=s[0],f=s[1];return C.createElement("img",i({ref:function(e){o.current=e,u(e)}},c,f))},X=function(e){var c=e.prefixCls,l=e.src,p=e.alt,g=e.imageInfo,b=e.fallback,w=e.movable,k=void 0===w||w,S=e.onClose,N=e.visible,I=e.icons,X=void 0===I?{}:I,M=e.rootClassName,z=e.closeIcon,Z=e.getContainer,L=e.current,j=void 0===L?0:L,O=e.count,D=void 0===O?1:O,F=e.countRender,W=e.scaleStep,H=void 0===W?.5:W,A=e.minScale,V=void 0===A?1:A,B=e.maxScale,G=void 0===B?50:B,K=e.transitionName,U=void 0===K?"zoom":K,_=e.maskTransitionName,q=void 0===_?"fade":_,J=e.imageRender,Q=e.imgCommonProps,$=e.toolbarRender,ee=e.onTransform,ne=e.onChange,te=a(e,Y),oe=h.useRef(),re=h.useContext(n),ae=re&&D>1,ie=re&&D>=1,ce=h.useState(!0),le=r(ce,2),se=le[0],ue=le[1],fe=function(e,n,t,a){var i=h.useRef(null),c=h.useRef([]),l=h.useState(R),s=r(l,2),u=s[0],v=s[1],p=function(e,n){null===i.current&&(c.current=[],i.current=m((function(){v((function(e){var t=e;return c.current.forEach((function(e){t=o(o({},t),e)})),i.current=null,null==a||a({transform:t,action:n}),t}))}))),c.current.push(o(o({},u),e))};return{transform:u,resetTransform:function(e){v(R),f(R,u)||null==a||a({transform:R,action:e})},updateTransform:p,dispatchZoomChange:function(o,r,a,i,c){var l=e.current,s=l.width,f=l.height,m=l.offsetWidth,v=l.offsetHeight,g=l.offsetLeft,h=l.offsetTop,C=o,y=u.scale*o;y>t?(y=t,C=t/u.scale):y<n&&(C=(y=c?y:n)/u.scale);var b=null!=a?a:innerWidth/2,w=null!=i?i:innerHeight/2,x=C-1,R=x*s*.5,k=x*f*.5,E=x*(b-u.x-g),S=x*(w-u.y-h),N=u.x-(E-R),T=u.y-(S-k);if(o<1&&1===y){var I=m*y,Y=v*y,P=d(),X=P.width,M=P.height;I<=X&&Y<=M&&(N=0,T=0)}p({x:N,y:T,scale:y},r)}}}(oe,V,G,ee),me=fe.transform,de=fe.resetTransform,ve=fe.updateTransform,pe=fe.dispatchZoomChange,ge=function(e,n,t,a,i,c,l){var s=i.rotate,u=i.scale,f=i.x,m=i.y,d=h.useState(!1),p=r(d,2),g=p[0],C=p[1],y=h.useRef({diffX:0,diffY:0,transformX:0,transformY:0}),b=function(e){t&&g&&c({x:e.pageX-y.current.diffX,y:e.pageY-y.current.diffY},"move")},w=function(){if(t&&g){C(!1);var n=y.current,r=n.transformX,a=n.transformY;if(f===r||m===a)return;var i=e.current.offsetWidth*u,l=e.current.offsetHeight*u,d=e.current.getBoundingClientRect(),v=d.left,p=d.top,h=s%180!=0,b=E(h?l:i,h?i:l,v,p);b&&c(o({},b),"dragRebound")}};return h.useEffect((function(){var e,t,o,r;if(n){o=v(window,"mouseup",w,!1),r=v(window,"mousemove",b,!1);try{window.top!==window.self&&(e=v(window.top,"mouseup",w,!1),t=v(window.top,"mousemove",b,!1))}catch(a){}}return function(){var n,a,i,c;null===(n=o)||void 0===n||n.remove(),null===(a=r)||void 0===a||a.remove(),null===(i=e)||void 0===i||i.remove(),null===(c=t)||void 0===c||c.remove()}}),[t,g,f,m,s,n]),{isMoving:g,onMouseDown:function(e){n&&0===e.button&&(e.preventDefault(),e.stopPropagation(),y.current={diffX:e.pageX-f,diffY:e.pageY-m,transformX:f,transformY:m},C(!0))},onMouseMove:b,onMouseUp:w,onWheel:function(e){if(t&&0!=e.deltaY){var n=Math.abs(e.deltaY/100),o=1+Math.min(n,1)*a;e.deltaY>0&&(o=1/o),l(o,"wheel",e.clientX,e.clientY)}}}}(oe,k,N,H,me,ve,pe),he=ge.isMoving,Ce=ge.onMouseDown,ye=ge.onWheel,be=T(oe,k,N,V,me,ve,pe),we=be.isTouching,xe=be.onTouchStart,Re=be.onTouchMove,ke=be.onTouchEnd,Ee=me.rotate,Se=me.scale,Ne=s(t({},"".concat(c,"-moving"),he));h.useEffect((function(){se||ue(!0)}),[se]);var Te=function(e){var n=j+e;!Number.isInteger(n)||n<0||n>D-1||(ue(!1),de(e<0?"prev":"next"),null==ne||ne(n,j))},Ie=function(e){N&&ae&&(e.keyCode===u.LEFT?Te(-1):e.keyCode===u.RIGHT&&Te(1))};h.useEffect((function(){var e=v(window,"keydown",Ie,!1);return function(){e.remove()}}),[N,ae,j]);var Ye=C.createElement(P,i({},Q,{width:e.width,height:e.height,imgRef:oe,className:"".concat(c,"-img"),alt:p,style:{transform:"translate3d(".concat(me.x,"px, ").concat(me.y,"px, 0) scale3d(").concat(me.flipX?"-":"").concat(Se,", ").concat(me.flipY?"-":"").concat(Se,", 1) rotate(").concat(Ee,"deg)"),transitionDuration:(!se||we)&&"0s"},fallback:b,src:l,onWheel:ye,onMouseDown:Ce,onDoubleClick:function(e){N&&(1!==Se?ve({x:0,y:0,scale:1},"doubleClick"):pe(1+H,"doubleClick",e.clientX,e.clientY))},onTouchStart:xe,onTouchMove:Re,onTouchEnd:ke,onTouchCancel:ke})),Pe=o({url:l,alt:p},g);return C.createElement(C.Fragment,null,C.createElement(y,i({transitionName:U,maskTransitionName:q,closable:!1,keyboard:!0,prefixCls:c,onClose:S,visible:N,classNames:{wrapper:Ne},rootClassName:M,getContainer:Z},te,{afterClose:function(){de("close")}}),C.createElement("div",{className:"".concat(c,"-img-wrapper")},J?J(Ye,o({transform:me,image:Pe},re?{current:j}:{})):Ye)),C.createElement(x,{visible:N,transform:me,maskTransitionName:q,closeIcon:z,getContainer:Z,prefixCls:c,rootClassName:M,icons:X,countRender:F,showSwitch:ae,showProgress:ie,current:j,count:D,scale:Se,minScale:V,maxScale:G,toolbarRender:$,onActive:Te,onZoomIn:function(){pe(1+H,"zoomIn")},onZoomOut:function(){pe(1/(1+H),"zoomOut")},onRotateRight:function(){ve({rotate:Ee+90},"rotateRight")},onRotateLeft:function(){ve({rotate:Ee-90},"rotateLeft")},onFlipX:function(){ve({flipX:!me.flipX},"flipX")},onFlipY:function(){ve({flipY:!me.flipY},"flipY")},onClose:S,onReset:function(){de("reset")},zIndex:void 0!==te.zIndex?te.zIndex+1:void 0,image:Pe}))},M=["crossOrigin","decoding","draggable","loading","referrerPolicy","sizes","srcSet","useMap","alt"],z=["visible","onVisibleChange","getContainer","current","movable","minScale","maxScale","countRender","closeIcon","onChange","onTransform","toolbarRender","imageRender"],Z=["src"],L=0,j=["src","alt","onPreviewClose","prefixCls","previewPrefixCls","placeholder","fallback","width","height","style","preview","className","onClick","onError","wrapperClassName","wrapperStyle","rootClassName"],O=["src","visible","onVisibleChange","getContainer","mask","maskClassName","movable","icons","scaleStep","minScale","maxScale","imageRender","toolbarRender"];e("I",(function(e){var c=e.src,u=e.alt,f=e.onPreviewClose,m=e.prefixCls,d=void 0===m?"rc-image":m,v=e.previewPrefixCls,C=void 0===v?"".concat(d,"-preview"):v,y=e.placeholder,b=e.fallback,w=e.width,x=e.height,R=e.style,k=e.preview,E=void 0===k||k,N=e.className,T=e.onClick,I=e.onError,Y=e.wrapperClassName,P=e.wrapperStyle,z=e.rootClassName,Z=a(e,j),D=y&&!0!==y,F="object"===l(E)?E:{},W=F.src,H=F.visible,A=void 0===H?void 0:H,V=F.onVisibleChange,B=void 0===V?f:V,G=F.getContainer,K=void 0===G?void 0:G,U=F.mask,_=F.maskClassName,q=F.movable,J=F.icons,Q=F.scaleStep,$=F.minScale,ee=F.maxScale,ne=F.imageRender,te=F.toolbarRender,oe=a(F,O),re=null!=W?W:c,ae=p(!!A,{value:A,onChange:B}),ie=r(ae,2),ce=ie[0],le=ie[1],se=S({src:c,isCustomPlaceholder:D,fallback:b}),ue=r(se,3),fe=ue[0],me=ue[1],de=ue[2],ve=h.useState(null),pe=r(ve,2),ge=pe[0],he=pe[1],Ce=h.useContext(n),ye=!!E,be=s(d,Y,z,t({},"".concat(d,"-error"),"error"===de)),we=h.useMemo((function(){var n={};return M.forEach((function(t){void 0!==e[t]&&(n[t]=e[t])})),n}),M.map((function(n){return e[n]}))),xe=function(e,t){var o=h.useState((function(){return String(L+=1)})),a=r(o,1)[0],i=h.useContext(n),c={data:t,canPreview:e};return h.useEffect((function(){if(i)return i.register(a,c)}),[]),h.useEffect((function(){i&&i.register(a,c)}),[e,t]),a}(ye,h.useMemo((function(){return o(o({},we),{},{src:re})}),[re,we]));return h.createElement(h.Fragment,null,h.createElement("div",i({},Z,{className:be,onClick:ye?function(e){var n=g(e.target),t=n.left,o=n.top;Ce?Ce.onPreview(xe,re,t,o):(he({x:t,y:o}),le(!0)),null==T||T(e)}:T,style:o({width:w,height:x},P)}),h.createElement("img",i({},we,{className:s("".concat(d,"-img"),t({},"".concat(d,"-img-placeholder"),!0===y),N),style:o({height:x},R),ref:fe},me,{width:w,height:x,onError:I})),"loading"===de&&h.createElement("div",{"aria-hidden":"true",className:"".concat(d,"-placeholder")},y),U&&ye&&h.createElement("div",{className:s("".concat(d,"-mask"),_),style:{display:"none"===(null==R?void 0:R.display)?"none":void 0}},U)),!Ce&&ye&&h.createElement(X,i({"aria-hidden":!ce,visible:ce,prefixCls:C,onClose:function(){le(!1),he(null)},mousePosition:ge,src:re,alt:u,imageInfo:{width:w,height:x},fallback:b,getContainer:K,icons:J,movable:q,scaleStep:Q,minScale:$,maxScale:ee,rootClassName:z,imageRender:ne,imgCommonProps:we,toolbarRender:te},oe)))})).PreviewGroup=function(e){var s,u=e.previewPrefixCls,f=void 0===u?"rc-image-preview":u,m=e.children,d=e.icons,v=void 0===d?{}:d,g=e.items,C=e.preview,y=e.fallback,b="object"===l(C)?C:{},w=b.visible,x=b.onVisibleChange,R=b.getContainer,k=b.current,E=b.movable,S=b.minScale,N=b.maxScale,T=b.countRender,I=b.closeIcon,Y=b.onChange,P=b.onTransform,L=b.toolbarRender,j=b.imageRender,O=a(b,z),D=function(e){var n=h.useState({}),a=r(n,2),i=a[0],l=a[1],s=h.useCallback((function(e,n){return l((function(r){return o(o({},r),{},t({},e,n))})),function(){l((function(n){var t=o({},n);return delete t[e],t}))}}),[]);return[h.useMemo((function(){return e?e.map((function(e){if("string"==typeof e)return{data:{src:e}};var n={};return Object.keys(e).forEach((function(t){["src"].concat(c(M)).includes(t)&&(n[t]=e[t])})),{data:n}})):Object.keys(i).reduce((function(e,n){var t=i[n],o=t.canPreview,r=t.data;return o&&e.push({data:r,id:n}),e}),[])}),[e,i]),s,!!e]}(g),F=r(D,3),W=F[0],H=F[1],A=F[2],V=p(0,{value:k}),B=r(V,2),G=B[0],K=B[1],U=h.useState(!1),_=r(U,2),q=_[0],J=_[1],Q=(null===(s=W[G])||void 0===s?void 0:s.data)||{},$=Q.src,ee=a(Q,Z),ne=p(!!w,{value:w,onChange:function(e,n){null==x||x(e,n,G)}}),te=r(ne,2),oe=te[0],re=te[1],ae=h.useState(null),ie=r(ae,2),ce=ie[0],le=ie[1],se=h.useCallback((function(e,n,t,o){var r=A?W.findIndex((function(e){return e.data.src===n})):W.findIndex((function(n){return n.id===e}));K(r<0?0:r),re(!0),le({x:t,y:o}),J(!0)}),[W,A]);h.useEffect((function(){oe?q||K(0):J(!1)}),[oe]);var ue=h.useMemo((function(){return{register:H,onPreview:se}}),[H,se]);return h.createElement(n.Provider,{value:ue},m,h.createElement(X,i({"aria-hidden":!oe,movable:E,visible:oe,prefixCls:f,closeIcon:I,onClose:function(){re(!1),le(null)},mousePosition:ce,imgCommonProps:ee,src:$,fallback:y,icons:v,minScale:S,maxScale:N,getContainer:R,current:G,count:W.length,countRender:T,onTransform:P,toolbarRender:L,imageRender:j,onChange:function(e,n){K(e),null==Y||Y(e,n)}},O)))}}}}));
