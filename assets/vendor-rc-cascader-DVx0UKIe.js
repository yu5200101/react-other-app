import{K as e,f as n,k as t}from"./vendor-rc-util-C7GvDjgY.js";import{h as o,b as r,_ as a,a as i,d as l,e as c,c as u}from"./vendor-@babel-IoAzJ7sT.js";import{u as s,b as d,B as f}from"./vendor-rc-select-u6tt5C5p.js";import{r as p}from"./vendor-react-BVfqOVDk.js";import{c as v,a as h}from"./vendor-rc-tree-BVdqpC3W.js";import{c as m}from"./vendor-classnames-C6ZHPJN9.js";import"./vendor-rc-overflow-Kc1Cibad.js";import"./vendor-react-dom-DqUgb2va.js";import"./vendor-rc-resize-observer-CNB7JSb9.js";import"./vendor-rc-motion-BgWqvPg4.js";var g=p.createContext({}),C="__rc_cascader_search_mark__",b=function(e,n,t){var o=t.label,r=void 0===o?"":o;return n.some((function(n){return String(n[r]).toLowerCase().includes(e.toLowerCase())}))},k=function(e,n,t,o){return n.map((function(e){return e[o.label]})).join(" / ")},y="__RC_CASCADER_SPLIT__",S="SHOW_PARENT",x="SHOW_CHILD";function E(e){return e.join(y)}function w(e){return e.map(E)}function N(e){var n=e||{},t=n.label,o=n.value||"value";return{label:t||"label",value:o,key:o,children:n.children||"children"}}function V(e,n){var t,o;return null!==(t=e.isLeaf)&&void 0!==t?t:!(null!==(o=e[n.children])&&void 0!==o&&o.length)}function O(e){var n=e.parentElement;if(n){var t=e.offsetTop-n.offsetTop;t-n.scrollTop<0?n.scrollTo({top:t}):t+e.offsetHeight-n.scrollTop>n.offsetHeight&&n.scrollTo({top:t+e.offsetHeight-n.offsetHeight})}}function P(e,n){return e.map((function(e){var t;return null===(t=e[C])||void 0===t?void 0:t.map((function(e){return e[n.value]}))}))}function _(e){return e?function(e){return Array.isArray(e)&&Array.isArray(e[0])}(e)?e:(0===e.length?[]:[e]).map((function(e){return Array.isArray(e)?e:[e]})):[]}function M(e,n,t){var o=new Set(e),r=n();return e.filter((function(e){var n=r[e],a=n?n.parent:null,i=n?n.children:null;return!(!n||!n.node.disabled)||(t===x?!(i&&i.some((function(e){return e.key&&o.has(e.key)}))):!(a&&!a.node.disabled&&o.has(a.key)))}))}function I(e,n,t){for(var o=arguments.length>3&&void 0!==arguments[3]&&arguments[3],r=n,a=[],i=function(){var n,i,c,u=e[l],s=null===(n=r)||void 0===n?void 0:n.findIndex((function(e){var n=e[t.value];return o?String(n)===String(u):n===u})),d=-1!==s?null===(i=r)||void 0===i?void 0:i[s]:null;a.push({value:null!==(c=null==d?void 0:d[t.value])&&void 0!==c?c:u,index:s,option:d}),r=null==d?void 0:d[t.children]},l=0;l<e.length;l+=1)i();return a}function T(e,n){return p.useCallback((function(t){var o=[],r=[];return t.forEach((function(t){I(t,e,n).every((function(e){return e.option}))?r.push(t):o.push(t)})),[r,o]}),[e,n])}function D(e,n){var t=p.useMemo((function(){return n||[]}),[n]),o=function(e,n){var t=p.useRef({options:[],info:{keyEntities:{},pathKeyEntities:{}}});return p.useCallback((function(){return t.current.options!==e&&(t.current.options=e,t.current.info=v(e,{fieldNames:n,initWrapper:function(e){return r(r({},e),{},{pathKeyEntities:{}})},processEntity:function(e,t){var o=e.nodes.map((function(e){return e[n.value]})).join(y);t.pathKeyEntities[o]=e,e.key=o}})),t.current.info.pathKeyEntities}),[n,e])}(t,e),a=p.useCallback((function(n){var t=o();return n.map((function(n){return t[n].nodes.map((function(n){return n[e.value]}))}))}),[o,e]);return[t,o,a]}function K(e,n,t,r,a,i,l,c){return function(u){if(e){var s=E(u),d=w(t),f=w(r),p=d.includes(s),v=a.some((function(e){return E(e)===s})),m=t,g=a;if(v&&!p)g=a.filter((function(e){return E(e)!==s}));else{var C,b=p?d.filter((function(e){return e!==s})):[].concat(o(d),[s]),k=i();if(p)C=h(b,{halfCheckedKeys:f},k).checkedKeys;else C=h(b,!0,k).checkedKeys;var y=M(C,i,c);m=l(y)}n([].concat(o(g),o(m)))}else n(u)}}function R(e,n,t,o,r){return p.useMemo((function(){var a=r(n),i=l(a,2),c=i[0],u=i[1];if(!e||!n.length)return[c,[],u];var s=w(c),d=t(),f=h(s,!0,d),p=f.checkedKeys,v=f.halfCheckedKeys;return[o(p),o(v),u]}),[e,n,t,o,r])}var j=p.memo((function(e){return e.children}),(function(e,n){return!n.open}));function A(e){var n,t=e.prefixCls,o=e.checked,r=e.halfChecked,i=e.disabled,l=e.onClick,c=e.disableCheckbox,u=p.useContext(g).checkable,s="boolean"!=typeof u?u:null;return p.createElement("span",{className:m("".concat(t),(n={},a(n,"".concat(t,"-checked"),o),a(n,"".concat(t,"-indeterminate"),!o&&r),a(n,"".concat(t,"-disabled"),i||c),n)),onClick:l},s)}var W="__cascader_fix_label__";function H(e){var n=e.prefixCls,t=e.multiple,r=e.options,i=e.activeValue,l=e.prevValuePath,c=e.onToggleOpen,u=e.onSelect,s=e.onActive,d=e.checkedSet,f=e.halfCheckedSet,v=e.loadingKeys,h=e.isSelectable,b=e.disabled,k="".concat(n,"-menu"),y="".concat(n,"-menu-item"),S=p.useContext(g),x=S.fieldNames,w=S.changeOnSelect,N=S.expandTrigger,O=S.expandIcon,P=S.loadingIcon,_=S.dropdownMenuColumnStyle,M=S.optionRender,I="hover"===N,T=function(e){return b||e},D=p.useMemo((function(){return r.map((function(e){var n,t=e.disabled,r=e.disableCheckbox,a=e[C],i=null!==(n=e[W])&&void 0!==n?n:e[x.label],c=e[x.value],u=V(e,x),s=a?a.map((function(e){return e[x.value]})):[].concat(o(l),[c]),p=E(s);return{disabled:t,label:i,value:c,isLeaf:u,isLoading:v.includes(p),checked:d.has(p),halfChecked:f.has(p),option:e,disableCheckbox:r,fullPath:s,fullPathKey:p}}))}),[r,d,x,f,v,l]);return p.createElement("ul",{className:k,role:"menu"},D.map((function(e){var r,l,d=e.disabled,f=e.label,v=e.value,g=e.isLeaf,C=e.isLoading,b=e.checked,k=e.halfChecked,S=e.option,x=e.fullPath,E=e.fullPathKey,N=e.disableCheckbox,V=function(){if(!T(d)){var e=o(x);I&&g&&e.pop(),s(e)}},D=function(){h(S)&&!T(d)&&u(x,g)};return"string"==typeof S.title?l=S.title:"string"==typeof f&&(l=f),p.createElement("li",{key:E,className:m(y,(r={},a(r,"".concat(y,"-expand"),!g),a(r,"".concat(y,"-active"),i===v||i===E),a(r,"".concat(y,"-disabled"),T(d)),a(r,"".concat(y,"-loading"),C),r)),style:_,role:"menuitemcheckbox",title:l,"aria-checked":b,"data-path-key":E,onClick:function(){V(),N||t&&!g||D()},onDoubleClick:function(){w&&c(!1)},onMouseEnter:function(){I&&V()},onMouseDown:function(e){e.preventDefault()}},t&&p.createElement(A,{prefixCls:"".concat(n,"-checkbox"),checked:b,halfChecked:k,disabled:T(d)||N,disableCheckbox:N,onClick:function(e){N||(e.stopPropagation(),D())}}),p.createElement("div",{className:"".concat(y,"-content")},M?M(S):f),!C&&O&&!g&&p.createElement("div",{className:"".concat(y,"-expand-icon")},O),C&&P&&p.createElement("div",{className:"".concat(y,"-loading-icon")},P))})))}const L=function(n,t,r,a,i,c,u){var s=u.direction,d=u.searchValue,f=u.toggleOpen,v=u.open,h="rtl"===s,m=p.useMemo((function(){for(var e=-1,n=t,o=[],i=[],l=a.length,c=P(t,r),u=function(t){var l=n.findIndex((function(e,n){return(c[n]?E(c[n]):e[r.value])===a[t]}));if(-1===l)return 1;e=l,o.push(e),i.push(a[t]),n=n[e][r.children]},s=0;s<l&&n&&!u(s);s+=1);for(var d=t,f=0;f<o.length-1;f+=1)d=d[o[f]][r.children];return[i,e,d,c]}),[a,r,t]),g=l(m,4),b=g[0],k=g[1],y=g[2],S=g[3],x=function(e){i(e)},w=function(){if(b.length>1){var e=b.slice(0,-1);x(e)}else f(!1)},N=function(){var e,n=((null===(e=y[k])||void 0===e?void 0:e[r.children])||[]).find((function(e){return!e.disabled}));if(n){var t=[].concat(o(b),[n[r.value]]);x(t)}};p.useImperativeHandle(n,(function(){return{onKeyDown:function(n){var t=n.which;switch(t){case e.UP:case e.DOWN:var o=0;t===e.UP?o=-1:t===e.DOWN&&(o=1),0!==o&&function(e){var n=y.length,t=k;-1===t&&e<0&&(t=n);for(var o=0;o<n;o+=1){var a=y[t=(t+e+n)%n];if(a&&!a.disabled){var i=b.slice(0,-1).concat(S[t]?E(S[t]):a[r.value]);return void x(i)}}}(o);break;case e.LEFT:if(d)break;h?N():w();break;case e.RIGHT:if(d)break;h?w():N();break;case e.BACKSPACE:d||w();break;case e.ENTER:if(b.length){var a=y[k],i=(null==a?void 0:a[C])||[];i.length?c(i.map((function(e){return e[r.value]})),i[i.length-1]):c(b,y[k])}break;case e.ESC:f(!1),v&&n.stopPropagation()}},onKeyUp:function(){}}}))};var F=p.forwardRef((function(e,n){var t,i,u,s=e.prefixCls,d=e.multiple,f=e.searchValue,v=e.toggleOpen,h=e.notFoundContent,C=e.direction,b=e.open,k=e.disabled,S=p.useRef(null),x="rtl"===C,N=p.useContext(g),_=N.options,M=N.values,T=N.halfValues,D=N.fieldNames,K=N.changeOnSelect,R=N.onSelect,A=N.searchOptions,F=N.dropdownPrefixCls,U=N.loadData,B=N.expandTrigger,J=F||s,q=p.useState([]),z=l(q,2),G=z[0],Y=z[1];p.useEffect((function(){G.length&&G.forEach((function(e){var n=I(e.split(y),_,D,!0).map((function(e){return e.option})),t=n[n.length-1];(!t||t[D.children]||V(t,D))&&Y((function(n){return n.filter((function(n){return n!==e}))}))}))}),[_,G,D]);var Z=p.useMemo((function(){return new Set(w(M))}),[M]),Q=p.useMemo((function(){return new Set(w(T))}),[T]),X=function(e,n){var t=p.useContext(g).values[0],o=p.useState([]),r=l(o,2),a=r[0],i=r[1];return p.useEffect((function(){e||i(t||[])}),[n,t]),[a,i]}(d,b),$=l(X,2),ee=$[0],ne=$[1],te=function(e){ne(e),function(e){if(U&&!f){var n=I(e,_,D).map((function(e){return e.option})),t=n[n.length-1];if(t&&!V(t,D)){var r=E(e);Y((function(e){return[].concat(o(e),[r])})),U(n)}}}(e)},oe=function(e){if(k)return!1;var n=e.disabled,t=V(e,D);return!n&&(t||K||d)},re=function(e,n){var t=arguments.length>2&&void 0!==arguments[2]&&arguments[2];R(e),!d&&(n||K&&("hover"===B||t))&&v(!1)},ae=p.useMemo((function(){return f?A:_}),[f,A,_]),ie=p.useMemo((function(){for(var e=[{options:ae}],n=ae,t=P(n,D),o=function(){var o=ee[r],a=n.find((function(e,n){return(t[n]?E(t[n]):e[D.value])===o})),i=null==a?void 0:a[D.children];if(null==i||!i.length)return 1;n=i,e.push({options:i})},r=0;r<ee.length&&!o();r+=1);return e}),[ae,ee,D]);L(n,ae,D,ee,te,(function(e,n){oe(n)&&re(e,V(n,D),!0)}),{direction:C,searchValue:f,toggleOpen:v,open:b}),p.useEffect((function(){if(!f)for(var e=0;e<ee.length;e+=1){var n,t=E(ee.slice(0,e+1)),o=null===(n=S.current)||void 0===n?void 0:n.querySelector('li[data-path-key="'.concat(t.replace(/\\{0,2}"/g,'\\"'),'"]'));o&&O(o)}}),[ee,f]);var le=!(null!==(t=ie[0])&&void 0!==t&&null!==(t=t.options)&&void 0!==t&&t.length),ce=[(i={},a(i,D.value,"__EMPTY__"),a(i,W,h),a(i,"disabled",!0),i)],ue=r(r({},e),{},{multiple:!le&&d,onSelect:re,onActive:te,onToggleOpen:v,checkedSet:Z,halfCheckedSet:Q,loadingKeys:G,isSelectable:oe}),se=(le?[{options:ce}]:ie).map((function(e,n){var t=ee.slice(0,n),o=ee[n];return p.createElement(H,c({key:n},ue,{prefixCls:J,options:e.options,prevValuePath:t,activeValue:o}))}));return p.createElement(j,{open:b},p.createElement("div",{className:m("".concat(J,"-menus"),(u={},a(u,"".concat(J,"-menu-empty"),le),a(u,"".concat(J,"-rtl"),x),u)),ref:S},se))})),U=p.forwardRef((function(e,n){var t=s();return p.createElement(F,c({},e,t,{ref:n}))}));function B(){}function J(e){var o,r=e,i=r.prefixCls,c=void 0===i?"rc-cascader":i,u=r.style,s=r.className,d=r.options,f=r.checkable,v=r.defaultValue,h=r.value,C=r.fieldNames,b=r.changeOnSelect,k=r.onChange,y=r.showCheckedStrategy,S=r.loadData,x=r.expandTrigger,E=r.expandIcon,w=void 0===E?">":E,V=r.loadingIcon,O=r.direction,P=r.notFoundContent,M=void 0===P?"Not Found":P,j=r.disabled,A=!!f,W=n(v,{value:h,postState:_}),H=l(W,2),L=H[0],U=H[1],J=p.useMemo((function(){return N(C)}),[JSON.stringify(C)]),q=D(J,d),z=l(q,3),G=z[0],Y=z[1],Z=z[2],Q=T(G,J),X=R(A,L,Y,Z,Q),$=l(X,3),ee=$[0],ne=$[1],te=$[2],oe=t((function(e){if(U(e),k){var n=_(e),t=n.map((function(e){return I(e,G,J).map((function(e){return e.option}))})),o=A?n:n[0],r=A?t:t[0];k(o,r)}})),re=K(A,oe,ee,ne,te,Y,Z,y),ae=t((function(e){re(e)})),ie=p.useMemo((function(){return{options:G,fieldNames:J,values:ee,halfValues:ne,changeOnSelect:b,onSelect:ae,checkable:f,searchOptions:[],dropdownPrefixCls:void 0,loadData:S,expandTrigger:x,expandIcon:w,loadingIcon:V,dropdownMenuColumnStyle:void 0}}),[G,J,ee,ne,b,ae,f,S,x,w,V]),le="".concat(c,"-panel"),ce=!G.length;return p.createElement(g.Provider,{value:ie},p.createElement("div",{className:m(le,(o={},a(o,"".concat(le,"-rtl"),"rtl"===O),a(o,"".concat(le,"-empty"),ce),o),s),style:u},ce?M:p.createElement(F,{prefixCls:c,searchValue:"",multiple:A,toggleOpen:B,open:!0,direction:O,disabled:j})))}var q=["id","prefixCls","fieldNames","defaultValue","value","changeOnSelect","onChange","displayRender","checkable","autoClearSearchValue","searchValue","onSearch","showSearch","expandTrigger","options","dropdownPrefixCls","loadData","popupVisible","open","popupClassName","dropdownClassName","dropdownMenuColumnStyle","dropdownStyle","popupPlacement","placement","onDropdownVisibleChange","onPopupVisibleChange","onOpenChange","expandIcon","loadingIcon","children","dropdownMatchSelectWidth","showCheckedStrategy","optionRender"],z=p.forwardRef((function(e,s){var v=e.id,h=e.prefixCls,m=void 0===h?"rc-cascader":h,y=e.fieldNames,x=e.defaultValue,V=e.value,O=e.changeOnSelect,P=e.onChange,j=e.displayRender,A=e.checkable,W=e.autoClearSearchValue,H=void 0===W||W,L=e.searchValue,F=e.onSearch,B=e.showSearch,J=e.expandTrigger,z=e.options,G=e.dropdownPrefixCls,Y=e.loadData,Z=e.popupVisible,Q=e.open,X=e.popupClassName,$=e.dropdownClassName,ee=e.dropdownMenuColumnStyle,ne=e.dropdownStyle,te=e.popupPlacement,oe=e.placement,re=e.onDropdownVisibleChange,ae=e.onPopupVisibleChange,ie=e.onOpenChange,le=e.expandIcon,ce=void 0===le?">":le,ue=e.loadingIcon,se=e.children,de=e.dropdownMatchSelectWidth,fe=void 0!==de&&de,pe=e.showCheckedStrategy,ve=void 0===pe?S:pe,he=e.optionRender,me=u(e,q),ge=d(v),Ce=!!A,be=n(x,{value:V,postState:_}),ke=l(be,2),ye=ke[0],Se=ke[1],xe=p.useMemo((function(){return N(y)}),[JSON.stringify(y)]),Ee=D(xe,z),we=l(Ee,3),Ne=we[0],Ve=we[1],Oe=we[2],Pe=n("",{value:L,postState:function(e){return e||""}}),_e=l(Pe,2),Me=_e[0],Ie=_e[1],Te=function(e){return p.useMemo((function(){if(!e)return[!1,{}];var n={matchInputWidth:!0,limit:50};return e&&"object"===i(e)&&(n=r(r({},n),e)),n.limit<=0&&(n.limit=!1),[!0,n]}),[e])}(B),De=l(Te,2),Ke=De[0],Re=De[1],je=function(e,n,t,i,l,c){var u=l.filter,s=void 0===u?b:u,d=l.render,f=void 0===d?k:d,v=l.limit,h=void 0===v?50:v,m=l.sort;return p.useMemo((function(){var l=[];return e?(function n(u,d){var p=arguments.length>2&&void 0!==arguments[2]&&arguments[2];u.forEach((function(u){if(!(!m&&!1!==h&&h>0&&l.length>=h)){var v,g=[].concat(o(d),[u]),b=u[t.children],k=p||u.disabled;b&&0!==b.length&&!c||s(e,g,{label:t.label})&&l.push(r(r({},u),{},(a(v={disabled:k},t.label,f(e,g,i,t)),a(v,C,g),a(v,t.children,void 0),v))),b&&n(u[t.children],g,k)}}))}(n,[]),m&&l.sort((function(n,o){return m(n[C],o[C],e,t)})),!1!==h&&h>0?l.slice(0,h):l):[]}),[e,n,t,i,f,c,s,m,h])}(Me,Ne,xe,G||m,Re,O||Ce),Ae=T(Ne,xe),We=R(Ce,ye,Ve,Oe,Ae),He=l(We,3),Le=He[0],Fe=He[1],Ue=He[2],Be=function(e,n,t,r,a){return p.useMemo((function(){var l=a||function(e){var n=r?e.slice(-1):e;return n.every((function(e){return["string","number"].includes(i(e))}))?n.join(" / "):n.reduce((function(e,n,t){var r=p.isValidElement(n)?p.cloneElement(n,{key:t}):n;return 0===t?[r]:[].concat(o(e),[" / ",r])}),[])};return e.map((function(e){var o,r=I(e,n,t),a=l(r.map((function(e){var n,o=e.option,r=e.value;return null!==(n=null==o?void 0:o[t.label])&&void 0!==n?n:r})),r.map((function(e){return e.option}))),i=E(e);return{label:a,value:i,key:i,valueCells:e,disabled:null===(o=r[r.length-1])||void 0===o||null===(o=o.option)||void 0===o?void 0:o.disabled}}))}),[e,n,t,a,r])}(p.useMemo((function(){var e=M(w(Le),Ve,ve);return[].concat(o(Ue),o(Oe(e)))}),[Le,Ve,Oe,Ue,ve]),Ne,xe,Ce,j),Je=t((function(e){if(Se(e),P){var n=_(e),t=n.map((function(e){return I(e,Ne,xe).map((function(e){return e.option}))})),o=Ce?n:n[0],r=Ce?t:t[0];P(o,r)}})),qe=K(Ce,Je,Le,Fe,Ue,Ve,Oe,ve),ze=t((function(e){Ce&&!H||Ie(""),qe(e)})),Ge=void 0!==Q?Q:Z,Ye=$||X,Ze=oe||te,Qe=p.useMemo((function(){return{options:Ne,fieldNames:xe,values:Le,halfValues:Fe,changeOnSelect:O,onSelect:ze,checkable:A,searchOptions:je,dropdownPrefixCls:G,loadData:Y,expandTrigger:J,expandIcon:ce,loadingIcon:ue,dropdownMenuColumnStyle:ee,optionRender:he}}),[Ne,xe,Le,Fe,O,ze,A,je,G,Y,J,ce,ue,ee,he]),Xe=!(Me?je:Ne).length,$e=Me&&Re.matchInputWidth||Xe?{}:{minWidth:"auto"};return p.createElement(g.Provider,{value:Qe},p.createElement(f,c({},me,{ref:s,id:ge,prefixCls:m,autoClearSearchValue:H,dropdownMatchSelectWidth:fe,dropdownStyle:r(r({},$e),ne),displayValues:Be,onDisplayValuesChange:function(e,n){if("clear"!==n.type){var t=n.values[0].valueCells;ze(t)}else Je([])},mode:Ce?"multiple":void 0,searchValue:Me,onSearch:function(e,n){Ie(e),"blur"!==n.source&&F&&F(e)},showSearch:Ke,OptionList:U,emptyOptions:Xe,open:Ge,dropdownClassName:Ye,placement:Ze,onDropdownVisibleChange:function(e){null==ie||ie(e),null==re||re(e),null==ae||ae(e)},getRawInputElement:function(){return se}})))}));z.SHOW_PARENT=S,z.SHOW_CHILD=x,z.Panel=J;export{z as C,J as P};
