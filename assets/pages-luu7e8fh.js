import{j as e,r as t,R as s}from"./vendor-react-BVfqOVDk.js";import{u as a,a as h,O as n,L as o}from"./vendor-react-router-B_GjjCbC.js";import{R as i,a as x,b as r,c as y,d as u,e as l,f as c,P as d,g as p,h as b,S as M,W as m,i as g,j as f,k as v,L as j,l as _,m as w,n as k,o as N}from"./vendor-@ant-design-yfVcUtjJ.js";import{s as L,r as T,l as C,a as S,g as D}from"./utils-Bq9pMUYH.js";import{M as E,s as R,t as P,T as z}from"./vendor-antd-C6plSMy0.js";import{c as I}from"./vendor-classnames-C6ZHPJN9.js";import{i as F}from"./vendor-use-immer-7TIcq8hT.js";const A={route:{path:"/home",children:[{path:"/home/data-processing",name:"数据加工",icon:e.jsx(y,{}),children:[{path:"/home/data-processing/teaching",name:"教学",icon:e.jsx(x,{})},{path:"/home/data-processing/trial",name:"测试",icon:e.jsx(r,{})}]},{path:"/home/three-coordinate-detection",name:"三坐标检测",icon:e.jsx(u,{}),access:"canAdmin",children:[{path:"/home/three-coordinate-detection/teaching",name:"教学",icon:e.jsx(x,{})},{path:"/home/three-coordinate-detection/trial",name:"测试",icon:e.jsx(r,{})}]},{path:"/home/welding",name:"焊接",icon:e.jsx(l,{}),children:[{path:"/home/welding/teaching",name:"教学",icon:e.jsx(x,{})},{path:"/home/welding/trial",name:"测试",icon:e.jsx(r,{})}]},{path:"https://www.baidu.com",name:"官网外链",icon:e.jsx(c,{})}]},location:{pathname:"/"},appList:[{icon:e.jsx(i,{}),title:"HomeOutlined",desc:"home",url:"https://www.baidu.com"}]},H=()=>{const s=a(),o=h(),x=L.localStorage.getItem("token");t.useEffect((()=>{x||o("/login")}),[x]);const r=t.useMemo((()=>s.pathname),[s]),[y,u]=t.useState(r),l=e=>{T.verifyNetUrl.test(e)||(o(e),u(e))};return x?e.jsx(e.Fragment,{children:e.jsx("div",{id:"test-pro-layout",children:e.jsx(d,{title:"集萃华科",logo:e.jsx(i,{}),onMenuHeaderClick:()=>{l("/")},token:{header:{heightLayoutHeader:50}},bgLayoutImgList:[{src:"https://img.alicdn.com/imgextra/i2/O1CN01O4etvp1DvpFLKfuWq_!!6000000000279-2-tps-609-606.png",left:85,bottom:100,height:"303px"},{src:"https://img.alicdn.com/imgextra/i2/O1CN01O4etvp1DvpFLKfuWq_!!6000000000279-2-tps-609-606.png",bottom:-68,right:-45,height:"303px"},{src:"https://img.alicdn.com/imgextra/i3/O1CN018NxReL1shX85Yz6Cx_!!6000000005798-2-tps-884-496.png",bottom:0,left:0,width:"331px"}],...A,location:{pathname:y},menu:{type:"group"},menuFooterRender:t=>{if(!(null==t?void 0:t.collapsed))return e.jsx("div",{style:{textAlign:"center",paddingBlockStart:12},children:e.jsx("div",{children:"© 2025"})})},menuItemRender:(t,s)=>e.jsx("div",{onClick:e=>{e.preventDefault(),t.path&&l(t.path)},children:s}),layout:"mix",splitMenus:!0,children:e.jsx(p,{children:e.jsx(b,{style:{minHeight:800},children:e.jsx(n,{})})})})})}):e.jsx(e.Fragment,{})},q="_container_1h4do_1";function O(){return e.jsx(e.Fragment,{children:e.jsx("div",{className:q,children:"欢迎页-home"})})}function X(){return e.jsx("div",{children:"课程简介"})}const Y="_header_10156_1",W=[{key:"sub1",label:"第一章 坐标测量机介绍",children:[{key:"g11",label:"测量机结构"},{key:"g12",label:"准正控制器"},{key:"g13",label:"测头系统"},{key:"g14",label:"软件系统"},{key:"g15",label:"测量机工作环境",children:[{key:"g151",label:"精度影响因素"},{key:"g152",label:"使用环境"}]}]},{key:"sub2",label:"第二章 软件",children:[{key:"g21",label:"软件界面简介"},{key:"g22",label:"菜单栏"},{key:"g23",label:"文件"},{key:"g24",label:"设备"},{key:"g25",label:"工具"}]}],B=()=>{const s=t.useMemo((()=>{const e=[],t=s=>{if(!s)return;const a=C.get(s,"children")||[];a.length&&(a.length&&s.key&&e.push(s.key),a.forEach((e=>{t(e)})))};return W.forEach((e=>{t(e)})),e}),[W]);return e.jsxs("div",{children:[e.jsx("h1",{className:Y,children:"课程目录"}),e.jsx(E,{onClick:e=>{},style:{width:"100%"},defaultSelectedKeys:["1"],defaultOpenKeys:s,mode:"inline",items:W})]})},K=()=>{const s=t.useRef(null);return e.jsx(e.Fragment,{children:e.jsxs(M,{formRef:s,onFinish:async()=>{await S(1e3),R.success("提交成功")},formProps:{validateMessages:{required:"此项为必填项"}},children:[e.jsx(M.StepForm,{name:"base",title:"一、单选题",stepProps:{description:"描述"},onFinish:async()=>(await S(2e3),!0),children:e.jsx(m.Group,{name:"radio-vertical",layout:"vertical",label:" Powerblade系列测量机的准正控制器不具备以下哪种功能？",options:[{label:"答案1",value:"A"},{label:"答案2",value:"B"},{label:"答案3",value:"C"},{label:"答案4",value:"D"}]})}),e.jsx(M.StepForm,{name:"checkbox",title:"多选题",stepProps:{description:"描述"},onFinish:async()=>!0,children:e.jsx(g.Group,{name:"checkbox",layout:"vertical",label:"Powerblade系列测量机的核心组成部分包括？",width:"lg",options:[{label:"答案1",value:"A"},{label:"答案2",value:"B"},{label:"答案3",value:"C"},{label:"答案4",value:"D"}]})}),e.jsx(M.StepForm,{name:"time",title:"填空题",stepProps:{description:"描述"},children:e.jsx(f,{name:"name",label:"测头补偿的原理是将测针球心坐标沿________方向补偿测针半径，得到工件实际表面坐标。",width:"md",tooltip:"提示文案",placeholder:"请输入名称",rules:[{required:!0}]})})]})})},U="_container_13hq5_1",G=()=>{const{token:s}=P.useToken(),[a,n]=t.useState("phone"),o=h();return e.jsx(v,{hashed:!1,children:e.jsx("div",{className:U,children:e.jsxs(j,{title:"集萃华科",subTitle:"工程教育课程平台",onFinish:e=>{const t=JSON.stringify(e);L.localStorage.setItem("token",t),o(D("/"))},children:[e.jsx(z,{centered:!0,activeKey:a,items:[{key:"account",label:"账号密码登录"},{key:"phone",label:"手机号登录"}],onChange:e=>n(e)}),"account"===a&&e.jsxs(e.Fragment,{children:[e.jsx(f,{name:"username",fieldProps:{size:"large",prefix:e.jsx(_,{className:"prefixIcon"})},placeholder:"请输入用户名",rules:[{required:!0,message:"请输入用户名!"}]}),e.jsx(f.Password,{name:"password",fieldProps:{size:"large",prefix:e.jsx(w,{className:"prefixIcon"}),strengthText:"Password should contain numbers, letters and special characters, at least 8 characters long.",statusRender:t=>{const a=t&&t.length>12?"ok":t&&t.length>6?"pass":"poor";return"pass"===a?e.jsx("div",{style:{color:s.colorWarning},children:"强度：中"}):"ok"===a?e.jsx("div",{style:{color:s.colorSuccess},children:"强度：强"}):e.jsx("div",{style:{color:s.colorError},children:"强度：弱"})}},placeholder:"请输入密码",rules:[{required:!0,message:"请输入密码！"}]})]}),"phone"===a&&e.jsxs(e.Fragment,{children:[e.jsx(f,{fieldProps:{size:"large",prefix:e.jsx(k,{className:"prefixIcon"})},name:"mobile",placeholder:"请输入手机号",rules:[{required:!0,message:"请输入手机号！"},{pattern:/^1\d{10}$/,message:"手机号格式错误！"}]}),e.jsx(N,{fieldProps:{size:"large",prefix:e.jsx(w,{className:"prefixIcon"})},captchaProps:{size:"large"},placeholder:"请输入验证码",captchaTextRender:(e,t)=>e?"".concat(t," ").concat("获取验证码"):"获取验证码",name:"captcha",rules:[{required:!0,message:"请输入验证码！"}],onGetCaptcha:async()=>{R.success("获取验证码成功！验证码为：1234")}})]}),e.jsxs("div",{style:{marginBlockEnd:24},children:[e.jsx(g,{noStyle:!0,name:"autoLogin",children:"自动登录"}),e.jsx("a",{style:{float:"right"},children:"忘记密码"})]})]})})})},J="_flowEditor_j8sok_1",$="_flowCanvas_j8sok_7",Q="_flowNode_eknzw_1",V="_nodeCanvas_eknzw_6",Z=10,ee=({moveData:e,setCanvasSize:t,setPositionTL:s,positionTL:a,data:h})=>{const n=[];if(e.y<0)if(t({x:2*Z+Math.abs(e.x),y:2*Z+Math.abs(e.y)}),e.x<-10?s({x:a.x+e.x-Z,y:a.y+e.y-Z}):s({x:a.x-Z,y:a.y+e.y-Z}),e.x>Z){if(Math.abs(e.x)>=Math.abs(e.y))n.push({x:Z,y:Math.abs(e.y)+Z}),n.push({x:Z,y:Z}),n.push({x:Math.abs(e.x)+Z,y:Z});else{const t=Math.round(Math.abs(e.y)/2)+Z;n.push({x:Z,y:Math.abs(e.y)+Z}),n.push({x:Z,y:t}),n.push({x:Math.abs(e.x)+Z,y:t}),n.push({x:Math.abs(e.x)+Z,y:Z})}}else if(e.x<-10){if(Math.abs(e.x)>=Math.abs(e.y))n.push({x:Math.abs(e.x)+Z,y:Math.abs(e.y)+Z}),n.push({x:Math.abs(e.x)+Z,y:Z}),n.push({x:Z,y:Z});else{const t=Math.round(Math.abs(e.y)/2)+Z;n.push({x:Math.abs(e.x)+Z,y:Math.abs(e.y)+Z}),n.push({x:Math.abs(e.x)+Z,y:t}),n.push({x:Z,y:t}),n.push({x:Z,y:Z})}}else n.push({x:Z,y:Math.abs(e.y)+Z}),n.push({x:Z,y:Z});else{const o=Math.round(h.width/2)+2*Z;if(e.x>=o||e.x<o&&e.x>0?s({x:a.x-Z,y:a.y-3*Z}):e.x<=-o?s({x:a.x+e.x-Z,y:a.y-3*Z}):s({x:a.x-o-Z,y:a.y-3*Z}),e.x>=o){t({x:2*Z+Math.abs(e.x),y:4*Z+Math.abs(e.y)});Math.abs(e.x)>=Math.abs(e.y)?(n.push({x:Z,y:3*Z}),n.push({x:Z,y:Z}),n.push({x:Math.abs(e.x)-2*Z,y:Z}),n.push({x:Math.abs(e.x)-2*Z,y:Math.abs(e.y)+3*Z}),n.push({x:Math.abs(e.x)+Z,y:Math.abs(e.y)+3*Z})):(n.push({x:Z,y:3*Z}),n.push({x:Z,y:Z}),n.push({x:Math.abs(e.x)+Z,y:Z}),n.push({x:Math.abs(e.x)+Z,y:Math.abs(e.y)+3*Z}))}else if(e.x<o&&e.x>0)t({x:o+2*Z,y:4*Z+Math.abs(e.y)}),n.push({x:Z,y:3*Z}),n.push({x:Z,y:Z}),n.push({x:o+Z,y:Z}),n.push({x:o+Z,y:Math.abs(e.y)}),n.push({x:Math.abs(e.x)+Z,y:Math.abs(e.y)}),n.push({x:Math.abs(e.x)+Z,y:Math.abs(e.y)+3*Z});else if(e.x<=-o){t({x:2*Z+Math.abs(e.x),y:4*Z+Math.abs(e.y)});Math.abs(e.x)>=Math.abs(e.y)?(n.push({x:Math.abs(e.x)+Z,y:3*Z}),n.push({x:Math.abs(e.x)+Z,y:Z}),n.push({x:4*Z,y:Z}),n.push({x:4*Z,y:Math.abs(e.y)+3*Z}),n.push({x:Z,y:Math.abs(e.y)+3*Z})):(n.push({x:Math.abs(e.x)+Z,y:3*Z}),n.push({x:Math.abs(e.x)+Z,y:Z}),n.push({x:Z,y:Z}),n.push({x:Z,y:Math.abs(e.y)+3*Z}))}else t({x:o+2*Z,y:4*Z+Math.abs(e.y)}),n.push({x:o+Z,y:3*Z}),n.push({x:o+Z,y:Z}),n.push({x:Z,y:Z}),n.push({x:Z,y:Math.abs(e.y)}),n.push({x:o+Z-Math.abs(e.x),y:Math.abs(e.y)}),n.push({x:o+Z-Math.abs(e.x),y:Math.abs(e.y)+3*Z})}return n},te=({moveData:e,setCanvasSize:t,setPositionTL:s,positionTL:a,data:h})=>{const n=[];if(e.x>0)if(t({x:2*Z+Math.abs(e.x),y:2*Z+Math.abs(e.y)}),e.y<-10?s({x:a.x-Z,y:a.y+e.y-Z}):s({x:a.x-Z,y:a.y-Z}),e.y<-10){if(Math.abs(e.y)>=Math.abs(e.x))n.push({x:Z,y:Z+Math.abs(e.y)}),n.push({x:Z+Math.abs(e.x),y:Z+Math.abs(e.y)}),n.push({x:Z+Math.abs(e.x),y:Z});else{const t=Math.round(Math.abs(e.x)/2)+Z;n.push({x:Z,y:Z+Math.abs(e.y)}),n.push({x:t,y:Z+Math.abs(e.y)}),n.push({x:t,y:Z}),n.push({x:Math.abs(e.x)+Z,y:Z})}}else if(e.y>Z){if(Math.abs(e.y)>=Math.abs(e.x))n.push({x:Z,y:Z}),n.push({x:Z+Math.abs(e.x),y:Z}),n.push({x:Z+Math.abs(e.x),y:Z+Math.abs(e.y)});else{const t=Math.round(Math.abs(e.x)/2)+Z;n.push({x:Z,y:Z}),n.push({x:t,y:Z}),n.push({x:t,y:Z+Math.abs(e.y)}),n.push({x:Z+Math.abs(e.x),y:Z+Math.abs(e.y)})}}else n.push({x:Z,y:Z}),n.push({x:Math.abs(e.x)+Z,y:Z});else{const o=Math.round(h.height/2)+2*Z;if(e.y<=-o?s({x:a.x+e.x-Z,y:a.y+e.y-Z}):e.y>-o&&e.y<=0?s({x:a.x+e.x-Z,y:a.y-o-Z}):(e.y,s({x:a.x+e.x-Z,y:a.y-Z})),e.y<=-o){t({x:4*Z+Math.abs(e.x),y:2*Z+Math.abs(e.y)});Math.abs(e.y)>=Math.abs(e.x)?(n.push({x:Math.abs(e.x)+Z,y:Math.abs(e.y)+Z}),n.push({x:Math.abs(e.x)+3*Z,y:Math.abs(e.y)+Z}),n.push({x:Math.abs(e.x)+3*Z,y:4*Z}),n.push({x:Z,y:4*Z}),n.push({x:Z,y:Z})):(n.push({x:Math.abs(e.x)+Z,y:Math.abs(e.y)+Z}),n.push({x:Math.abs(e.x)+3*Z,y:Math.abs(e.y)+Z}),n.push({x:Math.abs(e.x)+3*Z,y:Z}),n.push({x:Z,y:Z}))}else if(e.y>-o&&e.y<=0)t({x:4*Z+Math.abs(e.x),y:o+2*Z}),n.push({x:Math.abs(e.x)+Z,y:o+Z}),n.push({x:Math.abs(e.x)+3*Z,y:o+Z}),n.push({x:Math.abs(e.x)+3*Z,y:Z}),n.push({x:4*Z,y:Z}),n.push({x:4*Z,y:o+Z+e.y}),n.push({x:Z,y:o+Z+e.y});else if(e.y>=o){t({x:4*Z+Math.abs(e.x),y:2*Z+Math.abs(e.y)});Math.abs(e.y)>=Math.abs(e.x)?(n.push({x:Math.abs(e.x)+Z,y:Z}),n.push({x:Math.abs(e.x)+3*Z,y:Z}),n.push({x:Math.abs(e.x)+3*Z,y:Math.abs(e.y)-2*Z}),n.push({x:Z,y:Math.abs(e.y)-2*Z}),n.push({x:Z,y:Math.abs(e.y)+Z})):(n.push({x:Math.abs(e.x)+Z,y:Z}),n.push({x:Math.abs(e.x)+3*Z,y:Z}),n.push({x:Math.abs(e.x)+3*Z,y:Math.abs(e.y)+Z}),n.push({x:Z,y:Math.abs(e.y)+Z}))}else t({x:4*Z+Math.abs(e.x),y:o+2*Z}),n.push({x:Math.abs(e.x)+Z,y:Z}),n.push({x:Math.abs(e.x)+3*Z,y:Z}),n.push({x:Math.abs(e.x)+3*Z,y:o+Z}),n.push({x:4*Z,y:o+Z}),n.push({x:4*Z,y:Math.abs(e.y)+Z}),n.push({x:Z,y:Math.abs(e.y)+Z})}return n},se=({moveData:e,setCanvasSize:t,setPositionTL:s,positionTL:a,data:h})=>{const n=[];if(e.x<0)if(t({x:2*Z+Math.abs(e.x),y:2*Z+Math.abs(e.y)}),e.y<-10?s({x:a.x+e.x-Z,y:a.y+e.y-Z}):s({x:a.x+e.x-Z,y:a.y-Z}),e.y<-10){if(Math.abs(e.y)>=Math.abs(e.x))n.push({x:Z+Math.abs(e.x),y:Z+Math.abs(e.y)}),n.push({x:Z,y:Z+Math.abs(e.y)}),n.push({x:Z,y:Z});else{const t=Math.round(Math.abs(e.x)/2)+Z;n.push({x:Math.abs(e.x)+Z,y:Z+Math.abs(e.y)}),n.push({x:t,y:Z+Math.abs(e.y)}),n.push({x:t,y:Z}),n.push({x:Z,y:Z})}}else if(e.y>Z){if(Math.abs(e.y)>=Math.abs(e.x))n.push({x:Z+Math.abs(e.x),y:Z}),n.push({x:Z,y:Z}),n.push({x:Z,y:Z+Math.abs(e.y)});else{const t=Math.round(Math.abs(e.x)/2)+Z;n.push({x:Z+Math.abs(e.x),y:Z}),n.push({x:t,y:Z}),n.push({x:t,y:Z+Math.abs(e.y)}),n.push({x:Z,y:Z+Math.abs(e.y)})}}else n.push({x:Math.abs(e.x)+Z,y:Z}),n.push({x:Z,y:Z});else{const o=Math.round(h.height/2)+2*Z;if(e.y<=-o?s({x:a.x-3*Z,y:a.y+e.y-Z}):e.y>-o&&e.y<=0?s({x:a.x-3*Z,y:a.y-o-Z}):(e.y,s({x:a.x-3*Z,y:a.y-Z})),e.y<=-o){t({x:4*Z+Math.abs(e.x),y:2*Z+Math.abs(e.y)});Math.abs(e.y)>=Math.abs(e.x)?(n.push({x:3*Z,y:Math.abs(e.y)+Z}),n.push({x:Z,y:Math.abs(e.y)+Z}),n.push({x:Z,y:4*Z}),n.push({x:Math.abs(e.x)+3*Z,y:4*Z}),n.push({x:Math.abs(e.x)+3*Z,y:Z})):(n.push({x:3*Z,y:Math.abs(e.y)+Z}),n.push({x:Z,y:Math.abs(e.y)+Z}),n.push({x:Z,y:Z}),n.push({x:Math.abs(e.x)+3*Z,y:Z}))}else if(e.y>-o&&e.y<=0)t({x:4*Z+Math.abs(e.x),y:o+2*Z}),n.push({x:3*Z,y:o+Z}),n.push({x:Z,y:o+Z}),n.push({x:Z,y:Z}),n.push({x:Math.abs(e.x)-3*Z,y:Z}),n.push({x:Math.abs(e.x)-3*Z,y:o+Z+e.y}),n.push({x:Math.abs(e.x),y:o+Z+e.y});else if(e.y>=o){t({x:4*Z+Math.abs(e.x),y:2*Z+Math.abs(e.y)});Math.abs(e.y)>=Math.abs(e.x)?(n.push({x:3*Z,y:Z}),n.push({x:Z,y:Z}),n.push({x:Z,y:Math.abs(e.y)-2*Z}),n.push({x:Math.abs(e.x)+3*Z,y:Math.abs(e.y)-2*Z}),n.push({x:Math.abs(e.x)+3*Z,y:Math.abs(e.y)+Z})):(n.push({x:3*Z,y:Z}),n.push({x:Z,y:Z}),n.push({x:Z,y:Math.abs(e.y)+Z}),n.push({x:Math.abs(e.x)+3*Z,y:Math.abs(e.y)+Z}))}else t({x:4*Z+Math.abs(e.x),y:o+2*Z}),n.push({x:3*Z,y:Z}),n.push({x:Z,y:Z}),n.push({x:Z,y:o+Z}),n.push({x:Math.abs(e.x),y:o+Z}),n.push({x:Math.abs(e.x),y:Math.abs(e.y)+Z}),n.push({x:Math.abs(e.x)+3*Z,y:Math.abs(e.y)+Z})}return n},ae=({moveData:e,setCanvasSize:t,setPositionTL:s,positionTL:a,data:h})=>{const n=[];if(e.y>0)if(t({x:2*Z+Math.abs(e.x),y:2*Z+Math.abs(e.y)}),e.x<-10?s({x:a.x+e.x-Z,y:a.y-Z}):s({x:a.x-Z,y:a.y-Z}),e.x>Z){if(Math.abs(e.x)>=Math.abs(e.y))n.push({x:Z,y:Z}),n.push({x:Z,y:Math.abs(e.y)+Z}),n.push({x:Math.abs(e.x)+Z,y:Math.abs(e.y)+Z});else{const t=Math.round(Math.abs(e.y)/2)+Z;n.push({x:Z,y:Z}),n.push({x:Z,y:t}),n.push({x:Math.abs(e.x)+Z,y:t}),n.push({x:Math.abs(e.x)+Z,y:Math.abs(e.y)+Z})}}else if(e.x<-10){if(Math.abs(e.x)>=Math.abs(e.y))n.push({x:Math.abs(e.x)+Z,y:Z}),n.push({x:Math.abs(e.x)+Z,y:Math.abs(e.y)+Z}),n.push({x:Z,y:Math.abs(e.y)+Z});else{const t=Math.round(Math.abs(e.y)/2)+Z;n.push({x:Math.abs(e.x)+Z,y:Z}),n.push({x:Math.abs(e.x)+Z,y:t}),n.push({x:Z,y:t}),n.push({x:Z,y:Math.abs(e.y)+Z})}}else n.push({x:Z,y:Z}),n.push({x:Z,y:Math.abs(e.y)+Z});else{const o=Math.round(h.width/2)+2*Z;if(e.x>=o||e.x<o&&e.x>0?s({x:a.x-Z,y:a.y+e.y-Z}):e.x<=-o?s({x:a.x+e.x-Z,y:a.y+e.y-Z}):s({x:a.x-o-Z,y:a.y+e.y-Z}),e.x>=o){t({x:2*Z+Math.abs(e.x),y:4*Z+Math.abs(e.y)});Math.abs(e.x)>=Math.abs(e.y)?(n.push({x:Z,y:Math.abs(e.y)+Z}),n.push({x:Z,y:Math.abs(e.y)+3*Z}),n.push({x:Math.abs(e.x)-2*Z,y:Math.abs(e.y)+3*Z}),n.push({x:Math.abs(e.x)-2*Z,y:Z}),n.push({x:Math.abs(e.x)+Z,y:Z})):(n.push({x:Z,y:Math.abs(e.y)+Z}),n.push({x:Z,y:Math.abs(e.y)+3*Z}),n.push({x:Math.abs(e.x)+Z,y:Math.abs(e.y)+3*Z}),n.push({x:Math.abs(e.x)+Z,y:Z}))}else if(e.x<o&&e.x>0)t({x:o+2*Z,y:4*Z+Math.abs(e.y)}),n.push({x:Z,y:Math.abs(e.y)+Z}),n.push({x:Z,y:Math.abs(e.y)+3*Z}),n.push({x:o+Z,y:Math.abs(e.y)+3*Z}),n.push({x:o+Z,y:4*Z}),n.push({x:Math.abs(e.x)+Z,y:4*Z}),n.push({x:Math.abs(e.x)+Z,y:Z});else if(e.x<=-o){t({x:2*Z+Math.abs(e.x),y:4*Z+Math.abs(e.y)});Math.abs(e.x)>=Math.abs(e.y)?(n.push({x:Math.abs(e.x)+Z,y:Math.abs(e.y)+Z}),n.push({x:Math.abs(e.x)+Z,y:Math.abs(e.y)+3*Z}),n.push({x:4*Z,y:Math.abs(e.y)+3*Z}),n.push({x:4*Z,y:Z}),n.push({x:Z,y:Z})):(n.push({x:Math.abs(e.x)+Z,y:Math.abs(e.y)+Z}),n.push({x:Math.abs(e.x)+Z,y:Math.abs(e.y)+3*Z}),n.push({x:Z,y:Math.abs(e.y)+3*Z}),n.push({x:Z,y:Z}))}else t({x:o+2*Z,y:4*Z+Math.abs(e.y)}),n.push({x:o+Z,y:Math.abs(e.y)+Z}),n.push({x:o+Z,y:Math.abs(e.y)+3*Z}),n.push({x:Z,y:Math.abs(e.y)+3*Z}),n.push({x:Z,y:4*Z}),n.push({x:o+Z+e.x,y:4*Z}),n.push({x:o+Z+e.x,y:Z})}return n},he=s.memo((({data:s,zIndex:a,onNodeHover:h})=>{const n=t.useRef(null),o=t.useRef(null);t.useEffect((()=>{const e=n.current;if(!e)return;const t=e.getContext("2d");if(t){switch(t.clearRect(0,0,e.width,e.height),s.type){case"rectangle":t.fillStyle="transparent",t.strokeStyle="#333333",t.lineWidth=2,t.fillRect(0,0,s.width,s.height),t.strokeRect(Z,Z,s.width-2*Z,s.height-2*Z);break;case"diamond":t.fillStyle="transparent",t.strokeStyle="#333333",t.lineWidth=2,t.beginPath(),t.moveTo(s.width/2,0),t.lineTo(s.width,s.height/2),t.lineTo(s.width/2,s.height),t.lineTo(0,s.height/2),t.closePath(),t.fill(),t.stroke();break;case"circle":t.fillStyle="transparent",t.strokeStyle="#333333",t.lineWidth=2,a=t,h=s.width,o=s.height,i=s.height/2,a.beginPath(),a.moveTo(i,0),a.lineTo(h-i,0),a.arcTo(h,0,h,i,i),a.lineTo(h,o-i),a.arcTo(h,o,h-i,o,i),a.lineTo(i,o),a.arcTo(0,o,0,o-i,i),a.lineTo(0,i),a.arcTo(0,0,i,0,i),a.closePath(),a.stroke()}var a,h,o,i;s.text&&(t.fillStyle="#333",t.font="12px Arial",t.textAlign="center",t.textBaseline="middle",t.fillText(s.text,s.width/2,s.height/2))}}),[s]);return e.jsx("div",{ref:o,id:s.id,className:Q,style:{zIndex:a,left:s.x,top:s.y,width:s.width,height:s.height},onMouseDown:()=>{},onMouseEnter:()=>{h(s)},onMouseLeave:()=>{h({})},children:e.jsx("canvas",{ref:n,width:s.width,height:s.height,className:V})})})),ne="_flowEdge_1bhv1_1",oe="_canvas-box_1bhv1_4",ie=e=>{switch(e.sourceHandle){case"topLeft":return{x:e.x,y:e.y};case"top":return{x:e.x+e.width/2,y:e.y};case"topRight":return{x:e.x+e.width,y:e.y};case"right":return{x:e.x+e.width,y:e.y+e.height/2};case"bottomRight":return{x:e.x+e.width,y:e.y+e.height};case"bottom":return{x:e.x+e.width/2,y:e.y+e.height};case"bottomLeft":return{x:e.x,y:e.y+e.height};case"left":return{x:e.x,y:e.y+e.height/2};default:return{x:0,y:0}}},xe=(e,t)=>{if(!(t.length<2)){e.beginPath(),e.moveTo(t[0].x,t[0].y);for(let s=1;s<t.length;s++)e.lineTo(t[s].x,t[s].y);e.strokeStyle="#2c3e50",e.lineWidth=2,e.stroke(),((e,t,s)=>{const a=Math.atan2(s.y-t.y,s.x-t.x);e.beginPath(),e.moveTo(s.x,s.y),e.lineTo(s.x-15*Math.cos(a-Math.PI/6),s.y-15*Math.sin(a-Math.PI/6)),e.moveTo(s.x,s.y),e.lineTo(s.x-15*Math.cos(a+Math.PI/6),s.y-15*Math.sin(a+Math.PI/6)),e.strokeStyle="#2c3e50",e.lineWidth=2,e.stroke()})(e,t[t.length-2],t[t.length-1])}},re=s.memo((({data:s,zIndex:a,isDrawing:h,isNodeChangeForDraw:n,onSetDrawEdgeId:o,onEdgeMouseUp:i})=>{const x=t.useRef(null),r=t.useRef(null),{x:y,y:u}=t.useMemo((()=>ie(s)),[s]),[l,c]=t.useState({x:y,y:u}),d=t.useRef({x:y,y:u}),[p,b]=t.useState({x:Z,y:Z}),M=t.useCallback(((e,t,a)=>{const h={top:ee,right:te,bottom:ae,left:se};return h[t]&&h[t]({moveData:e,setCanvasSize:b,setPositionTL:c,positionTL:a,data:s})}),[s,b,c]),m=t.useCallback((e=>{requestAnimationFrame((()=>{if(!h)return document.removeEventListener("mousemove",m),void document.removeEventListener("mouseup",g);const t=r.current;if(!t)return;const a=t.getContext("2d");if(!a)return;const o=n?s.clientX:e.clientX,i=n?s.clientY:e.clientY,x=n?{x:y,y:u}:d.current,l=o-s.boxLeft-y,c=i-s.boxTop-u,p=M({x:l,y:c},s.sourceHandle,x);requestAnimationFrame((()=>{xe(a,p)}))}))}),[y,u,s,n,h]),g=t.useCallback((e=>{o(""),d.current.x=l.x,d.current.y=l.y,n||i(e.clientX,e.clientY,s)}),[o,i,s,n,l]);return t.useEffect((()=>{if(s.id)return document.addEventListener("mousemove",m),document.addEventListener("mouseup",g),()=>{document.removeEventListener("mousemove",m),document.removeEventListener("mouseup",g)}}),[s,h]),e.jsx("div",{ref:x,className:ne,style:{zIndex:a,left:l.x,top:l.y,width:p.x,height:p.y},children:e.jsx("canvas",{ref:r,className:oe,width:p.x,height:p.y,style:{width:p.x,height:p.y}})})})),ye="_sidebar_1nyhu_1",ue="_nodeList_1nyhu_12",le="_nodeType_1nyhu_17",ce=[{type:"rectangle",label:"流程"},{type:"diamond",label:"判定"},{type:"circle",label:"开始/结束"}],de=s.memo((({onDragStart:t})=>e.jsxs("div",{className:ye,children:[e.jsx("h3",{children:"节点类型"}),e.jsx("div",{className:ue,children:ce.map((s=>e.jsx("div",{className:le,draggable:!0,onDragStart:e=>t(e,{type:"nodeType",nodeType:s.type}),children:s.label},s.type)))})]}))),pe="_box-hover-control_1e459_1",be="_node-control-point_1e459_4",Me="_top_1e459_29",me="_right_1e459_34",ge="_bottom_1e459_39",fe="_left_1e459_44",ve=s.memo((({isMove:s,data:a,zIndex:h,onClickEdgePoint:n,onNodeHover:o,onNodeClick:i,onSetMoveNode:x,onNodeMouseMove:r})=>{const y=t.useCallback(((e,t)=>{t.stopPropagation(),n(a,e)}),[n,a]),u=t.useRef({x:0,y:0}),l=t.useRef(!1),c=t.useCallback((e=>{u.current.x=e.clientX-a.x,u.current.y=e.clientY-a.y,l.current=!0,x(a)}),[x,a]),d=t.useCallback((e=>{requestAnimationFrame((()=>{if(!s||!l.current)return document.removeEventListener("mousemove",d),void document.removeEventListener("mouseup",b);i("");const t=e.clientX-u.current.x,h=e.clientY-u.current.y;r(t,h,a.id)}))}),[r,a.id,s,i]),p=t.useCallback((()=>{u.current.x=0,u.current.y=0,l.current=!1,x({})}),[x]),b=t.useCallback((()=>{p(),i(a.id)}),[p,a.id,i]);return t.useEffect((()=>{if(a.id)return document.addEventListener("mousemove",d),document.addEventListener("mouseup",b),()=>{document.removeEventListener("mousemove",d),document.removeEventListener("mouseup",b)}}),[a.id,s]),e.jsx(e.Fragment,{children:e.jsxs("div",{style:{zIndex:h+1,left:a.x+Z,top:a.y+Z,width:a.width-2*Z,height:a.height-2*Z},onMouseDown:c,onMouseEnter:()=>{o(a)},onMouseLeave:()=>{p(),o({})},className:pe,children:[e.jsx("div",{className:I(be,Me),onMouseDown:e=>y("top",e)}),e.jsx("div",{className:I(be,me),onMouseDown:e=>y("right",e)}),e.jsx("div",{className:I(be,ge),onMouseDown:e=>y("bottom",e)}),e.jsx("div",{className:I(be,fe),onMouseDown:e=>y("left",e)})]})})})),je="_box-click-control_822kj_1",_e="_node-control-point_822kj_4",we="_rect_822kj_14",ke="_ew_822kj_17",Ne="_ns_822kj_20",Le="_nesw_822kj_23",Te="_nwse_822kj_26",Ce="_top_822kj_29",Se="_right_822kj_34",De="_bottom_822kj_39",Ee="_left_822kj_44",Re="_top-left_822kj_49",Pe="_top-right_822kj_53",ze="_bottom-left_822kj_57",Ie="_bottom-right_822kj_61",Fe=s.memo((({isResize:s,data:a,zIndex:h,onNodeHover:n,onSetResizeNode:o,onNodeMouseResize:i})=>{const x=t.useRef({x:0,y:0}),r=t.useRef(!1),y=t.useRef({x:0,y:0,width:0,height:0,type:""}),u=t.useCallback(((e,t)=>{t.stopPropagation();const s={...a,sourceHandle:e,x:a.x+Z,y:a.y+Z,width:a.width-2*Z,height:a.height-2*Z},{x:h,y:n}=ie(s);r.current=!0,x.current.x=t.clientX-a.x,x.current.y=t.clientY-a.y,y.current.x=a.boxLeft+h,y.current.y=a.boxTop+n,y.current.width=a.width,y.current.height=a.height,y.current.type=e,o(a)}),[a,o]),l=t.useCallback((e=>{requestAnimationFrame((()=>{if(!s||!r.current)return document.removeEventListener("mousemove",l),void document.removeEventListener("mouseup",c);let t=0,h=0;const n=e.clientX-x.current.x,o=e.clientY-x.current.y,u=e.clientX-y.current.x,d=e.clientY-y.current.y,p=[];"left"===y.current.type&&(t=y.current.width-u,p.push("width","x")),"topLeft"===y.current.type&&(t=y.current.width-u,h=y.current.height-d,p.push("width","height","x","y")),"top"===y.current.type&&(h=y.current.height-d,p.push("height","y")),"topRight"===y.current.type&&(t=y.current.width+u,h=y.current.height-d,p.push("width","height","y")),"right"===y.current.type&&(t=y.current.width+u,p.push("width")),"bottomRight"===y.current.type&&(t=y.current.width+u,h=y.current.height+d,p.push("width","height")),"bottom"===y.current.type&&(h=y.current.height+d,p.push("height")),"bottomLeft"===y.current.type&&(t=y.current.width-u,h=y.current.height+d,p.push("width","height","x")),i({width:t,height:h,id:a.id,x:n,y:o,changeType:p})}))}),[i,a.id,s]),c=t.useCallback((()=>{r.current=!1,x.current.x=0,x.current.y=0,y.current.x=0,y.current.y=0,y.current.width=0,y.current.height=0,y.current.type="",o({})}),[o]);return t.useEffect((()=>{if(a.id)return document.addEventListener("mousemove",l),document.addEventListener("mouseup",c),()=>{document.removeEventListener("mousemove",l),document.removeEventListener("mouseup",c)}}),[a.id,s]),e.jsx(e.Fragment,{children:e.jsxs("div",{style:{zIndex:h+1,left:a.x+Z,top:a.y+Z,width:a.width-2*Z,height:a.height-2*Z},onMouseEnter:()=>{n(a)},onMouseLeave:()=>{n({})},className:je,children:[e.jsx("div",{className:I(_e,we,Re,Te),onMouseDown:e=>u("topLeft",e)}),e.jsx("div",{className:I(_e,we,Ce,Ne),onMouseDown:e=>u("top",e)}),e.jsx("div",{className:I(_e,we,Pe,Le),onMouseDown:e=>u("topRight",e)}),e.jsx("div",{className:I(_e,we,Se,ke),onMouseDown:e=>u("right",e)}),e.jsx("div",{className:I(_e,we,Ie,Te),onMouseDown:e=>u("bottomRight",e)}),e.jsx("div",{className:I(_e,we,De,Ne),onMouseDown:e=>u("bottom",e)}),e.jsx("div",{className:I(_e,we,ze,Le),onMouseDown:e=>u("bottomLeft",e)}),e.jsx("div",{className:I(_e,we,Ee,ke),onMouseDown:e=>u("left",e)})]})})})),Ae=s.memo((()=>{const[s,a]=F([]),[h,n]=t.useState(null),[o,i]=t.useState({}),[x,r]=t.useState({}),y=t.useRef(null),[u,l]=t.useState(""),[c,d]=t.useState({}),p=t.useCallback(((e,t)=>{e.dataTransfer.setData("application/json",JSON.stringify(t)),e.dataTransfer.effectAllowed="move"}),[]),b=t.useCallback((e=>{e.preventDefault(),e.dataTransfer.dropEffect="move"}),[]),M=t.useCallback((e=>{var t;e.preventDefault();const s=e.dataTransfer.getData("application/json");if(!s)return;const h=JSON.parse(s),n=null==(t=y.current)?void 0:t.getBoundingClientRect();if(n&&"nodeType"===h.type){const t=e.clientX-n.left,s=e.clientY-n.top,o={id:"node-".concat(Date.now()),type:h.nodeType||"rectangle",strikeType:"node",x:t,y:s,boxLeft:n.left,boxTop:n.top,width:140,height:92};a((e=>{e.push(o)}))}}),[a]),m=t.useCallback(((e,t)=>{const s="edge-".concat(Date.now()),h={id:s,strikeType:"edge",source:e.id,sourceHandle:t,boxLeft:e.boxLeft,boxTop:e.boxTop,x:e.x+Z,y:e.y+Z,width:e.width-2*Z,height:e.height-2*Z};l(s),a((e=>{e.push(h)}))}),[l,a]),g=t.useCallback(((e,t,s)=>{a((a=>{const h=a.find((e=>e.id===s.id));h&&(h.clientX=e,h.clientY=t);const n=a.find((e=>e.id===s.source));Array.isArray(n.points)||(n.points=[]);const o=n.points.find((e=>e.type===s.sourceHandle));o?(o.x=e,o.y=t):n.points.push({type:s.sourceHandle,id:s.id,x:e,y:t})}))}),[a]),f=t.useCallback(((e,t,s)=>{a((a=>{const h=a.find((e=>e.id===s));if(h&&(h.x=e,h.y=t),Array.isArray(h.points)){h.points.map((e=>e.id)).forEach((s=>{const h=a.find((e=>e.id===s));h.x=e+Z,h.y=t+Z}))}}))}),[a]),v=t.useCallback((({width:e,height:t,x:s,y:h,id:n,changeType:o})=>{a((a=>{const i=a.find((e=>e.id===n));if(i&&(o.includes("width")&&(i.width=e),o.includes("height")&&(i.height=t),o.includes("x")&&(i.x=s),o.includes("y")&&(i.y=h)),Array.isArray(i.points)){i.points.map((e=>e.id)).forEach((n=>{const i=a.find((e=>e.id===n));o.includes("width")&&(i.width=e-2*Z),o.includes("height")&&(i.height=t-2*Z),o.includes("x")&&(i.x=s+Z),o.includes("y")&&(i.y=h+Z)}))}}))}),[a]),j=t.useCallback((e=>{const t=e.target;t.className.includes("nodeCanvas")||t.className.includes("node-control-point")||t.className.includes("box-hover-control")||t.className.includes("box-click-control")||n("")}),[n]),_=t.useCallback((e=>{const t=s.find((t=>t.id===e));return t.source===x.id||t.source===c.id}),[x,c,s]);return e.jsxs("div",{className:J,children:[e.jsx(de,{onDragStart:p}),e.jsxs("div",{ref:y,className:$,onClick:j,onDragOver:b,onDrop:M,children:[s.map(((t,s)=>"node"===t.strikeType?e.jsx(he,{zIndex:s+1,data:t,onNodeHover:i},t.id):e.jsx(re,{isDrawing:u===t.id||_(t.id),isNodeChangeForDraw:_(t.id),onSetDrawEdgeId:l,onEdgeMouseUp:g,data:t,zIndex:s+1},t.id))),o.id&&e.jsx(ve,{isMove:x.id===o.id,data:s.find((e=>e.id===o.id)),zIndex:s.length+1,onClickEdgePoint:m,onNodeHover:i,onNodeClick:n,onNodeMouseMove:f,onSetMoveNode:r}),h&&e.jsx(Fe,{isResize:c.id===h,data:s.find((e=>e.id===h)),zIndex:s.length+1,onNodeHover:i,onSetResizeNode:d,onNodeMouseResize:v})]})]})})),He=()=>e.jsx(e.Fragment,{children:e.jsx(Ae,{})});function qe(){return e.jsxs("div",{className:"not-found",children:[e.jsx("h1",{children:"404 - 页面不存在"}),e.jsx("p",{children:"您访问的地址有误，请检查 URL 或返回首页。"}),e.jsx(o,{to:"/",children:"返回首页"})]})}export{He as D,O as H,G as L,qe as N,X as O,B as T,H as h,K as t};
